# âŒ|âœ…|ğŸ’¡|ğŸ“Œ 155. æœ€å°æ ˆ

## ğŸ”— é—®é¢˜ç®€ä»‹

[LeetCode 155. æœ€å°æ ˆ](https://leetcode.cn/problems/min-stack?envType=problem-list-v2&envId=2cktkvj)

### ğŸ“ é¢˜ç›®æè¿°

è®¾è®¡ä¸€ä¸ªæ”¯æŒ `push`ã€`pop`ã€`top` æ“ä½œï¼Œå¹¶èƒ½åœ¨å¸¸æ•°æ—¶é—´å†…æ£€ç´¢åˆ°æœ€å°å…ƒç´ çš„æ ˆã€‚

å®ç° `MinStack` ç±»:

- `MinStack()` åˆå§‹åŒ–å †æ ˆå¯¹è±¡ã€‚
- `void push(int val)` å°†å…ƒç´  `val` æ¨å…¥å †æ ˆã€‚
- `void pop()` åˆ é™¤å †æ ˆé¡¶éƒ¨çš„å…ƒç´ ã€‚
- `int top()` è·å–å †æ ˆé¡¶éƒ¨çš„å…ƒç´ ã€‚
- `int getMin()` è·å–å †æ ˆä¸­çš„æœ€å°å…ƒç´ ã€‚

______________________________________________________________________

## ğŸ§ª ç¤ºä¾‹è¯´æ˜

```text
è¾“å…¥ï¼š
["MinStack","push","push","push","getMin","pop","top","getMin"]
[[],[-2],[0],[-3],[],[],[],[]]

è¾“å‡ºï¼š
[null,null,null,null,-3,null,0,-2]

è§£é‡Šï¼š
MinStack minStack = new MinStack();
minStack.push(-2);
minStack.push(0);
minStack.push(-3);
minStack.getMin();   --> è¿”å› -3.
minStack.pop();
minStack.top();      --> è¿”å› 0.
minStack.getMin();   --> è¿”å› -2.
```

______________________________________________________________________

## ğŸ’¡ è§£é¢˜æ€è·¯

è¦å®ç°åœ¨ **O(1)** æ—¶é—´å¤æ‚åº¦å†…è·å–æ ˆä¸­æœ€å°å€¼ï¼Œå…³é”®åœ¨äº**å¦‚ä½•åœ¨æ¯æ¬¡æ“ä½œåå¿«é€ŸçŸ¥é“å½“å‰æ ˆä¸­çš„æœ€å°å€¼**ã€‚

### âœ… æ–¹æ³•ä¸€ï¼šè¾…åŠ©æ ˆï¼ˆæ¨èï¼‰

- ä½¿ç”¨ä¸¤ä¸ªæ ˆï¼š
  - `mainStack`ï¼šå­˜å‚¨æ‰€æœ‰å…ƒç´ ã€‚
  - `minStack`ï¼šå­˜å‚¨å½“å‰æ ˆä¸­æœ€å°å€¼çš„å†å²è®°å½•ã€‚
- **push** æ—¶ï¼š
  - è‹¥ `minStack` ä¸ºç©ºï¼Œæˆ–æ–°å€¼ â‰¤ `minStack` æ ˆé¡¶ï¼Œåˆ™å°†æ–°å€¼ä¹Ÿå‹å…¥ `minStack`ã€‚
- **pop** æ—¶ï¼š
  - è‹¥ `mainStack` å¼¹å‡ºçš„å€¼ç­‰äº `minStack` æ ˆé¡¶ï¼Œåˆ™ `minStack` ä¹Ÿå¼¹å‡ºã€‚
- **getMin**ï¼šç›´æ¥è¿”å› `minStack` æ ˆé¡¶ã€‚

> âœ… ä¼˜ç‚¹ï¼šé€»è¾‘æ¸…æ™°ï¼Œæ—¶é—´/ç©ºé—´å‡ä¸º O(1)ï¼ˆå‡æ‘Šï¼‰ã€‚

______________________________________________________________________

### âœ… æ–¹æ³•äºŒï¼šå•æ ˆ + å·®å€¼ç¼–ç ï¼ˆè¿›é˜¶ï¼‰

- åªç”¨ä¸€ä¸ªæ ˆï¼Œå­˜å‚¨ **å½“å‰å€¼ä¸å½“å‰æœ€å°å€¼çš„å·®å€¼**ã€‚
- ç»´æŠ¤ä¸€ä¸ªå˜é‡ `min` è¡¨ç¤ºå½“å‰æœ€å°å€¼ã€‚
- **push(val)**:
  - è‹¥æ ˆç©ºï¼Œå‹å…¥ 0ï¼Œ`min = val`ã€‚
  - å¦åˆ™ï¼Œå‹å…¥ `val - min`ï¼›è‹¥ `val < min`ï¼Œæ›´æ–° `min = val`ã€‚
- **pop()**:
  - å¼¹å‡ºå·®å€¼ `diff = stack.pop()`ã€‚
  - è‹¥ `diff < 0`ï¼Œè¯´æ˜ä¹‹å‰æ›´æ–°è¿‡ `min`ï¼Œéœ€è¿˜åŸï¼š`min = min - diff`ã€‚
- **top()**:
  - è‹¥æ ˆé¡¶ `diff â‰¥ 0`ï¼Œåˆ™ `top = min + diff`ï¼›
  - å¦åˆ™ `top = min`ï¼ˆå› ä¸ºæ­¤æ—¶ `min` å°±æ˜¯åŸå€¼ï¼‰ã€‚

> âš ï¸ æ³¨æ„ï¼šæ­¤æ–¹æ³•æ¶‰åŠæ•´æ•°æº¢å‡ºé£é™©ï¼ˆå¦‚ `val` æå¤§è€Œ `min` æå°ï¼‰ï¼Œä½†åœ¨ LeetCode æµ‹è¯•ç”¨ä¾‹ä¸­é€šå¸¸å®‰å…¨ã€‚

______________________________________________________________________

### âŒ æ–¹æ³•ä¸‰ï¼šæš´åŠ›æ³•ï¼ˆä¸æ¨èï¼‰

- æ¯æ¬¡ `getMin()` éå†æ•´ä¸ªæ ˆæ‰¾æœ€å°å€¼ã€‚
- æ—¶é—´å¤æ‚åº¦ O(n)ï¼Œä¸ç¬¦åˆé¢˜ç›®â€œå¸¸æ•°æ—¶é—´â€è¦æ±‚ã€‚

______________________________________________________________________

## ğŸ’» ä»£ç å®ç°

<div class="code-tabs">

```java:Java
// æ–¹æ³•ä¸€ï¼šè¾…åŠ©æ ˆ
class MinStack {
    private Deque<Integer> mainStack;
    private Deque<Integer> minStack;

    public MinStack() {
        mainStack = new ArrayDeque<>();
        minStack = new ArrayDeque<>();
    }
    
    public void push(int val) {
        mainStack.push(val);
        if (minStack.isEmpty() || val <= minStack.peek()) {
            minStack.push(val);
        }
    }
    
    public void pop() {
        int val = mainStack.pop();
        if (val == minStack.peek()) {
            minStack.pop();
        }
    }
    
    public int top() {
        return mainStack.peek();
    }
    
    public int getMin() {
        return minStack.peek();
    }
}

// æ–¹æ³•äºŒï¼šå•æ ˆå·®å€¼æ³•ï¼ˆå¯é€‰ï¼‰
/*
class MinStack {
    private Deque<Long> stack;
    private long min;

    public MinStack() {
        stack = new ArrayDeque<>();
    }
    
    public void push(int val) {
        if (stack.isEmpty()) {
            stack.push(0L);
            min = val;
        } else {
            stack.push((long)val - min);
            if (val < min) min = val;
        }
    }
    
    public void pop() {
        long diff = stack.pop();
        if (diff < 0) {
            min = min - diff; // è¿˜åŸä¹‹å‰çš„ min
        }
    }
    
    public int top() {
        long diff = stack.peek();
        if (diff < 0) return (int)min;
        return (int)(min + diff);
    }
    
    public int getMin() {
        return (int)min;
    }
}
*/
```

```go:Go
// æ–¹æ³•ä¸€ï¼šè¾…åŠ©æ ˆ
type MinStack struct {
    mainStack []int
    minStack  []int
}

func Constructor() MinStack {
    return MinStack{}
}

func (this *MinStack) Push(val int) {
    this.mainStack = append(this.mainStack, val)
    if len(this.minStack) == 0 || val <= this.minStack[len(this.minStack)-1] {
        this.minStack = append(this.minStack, val)
    }
}

func (this *MinStack) Pop() {
    val := this.mainStack[len(this.mainStack)-1]
    this.mainStack = this.mainStack[:len(this.mainStack)-1]
    if val == this.minStack[len(this.minStack)-1] {
        this.minStack = this.minStack[:len(this.minStack)-1]
    }
}

func (this *MinStack) Top() int {
    return this.mainStack[len(this.mainStack)-1]
}

func (this *MinStack) GetMin() int {
    return this.minStack[len(this.minStack)-1]
}

// æ–¹æ³•äºŒï¼šå•æ ˆå·®å€¼æ³•ï¼ˆå¯é€‰ï¼‰
/*
type MinStack struct {
    stack []int64
    min   int64
}

func Constructor() MinStack {
    return MinStack{}
}

func (this *MinStack) Push(val int) {
    if len(this.stack) == 0 {
        this.stack = append(this.stack, 0)
        this.min = int64(val)
    } else {
        diff := int64(val) - this.min
        this.stack = append(this.stack, diff)
        if diff < 0 {
            this.min = int64(val)
        }
    }
}

func (this *MinStack) Pop() {
    diff := this.stack[len(this.stack)-1]
    this.stack = this.stack[:len(this.stack)-1]
    if diff < 0 {
        this.min = this.min - diff
    }
}

func (this *MinStack) Top() int {
    diff := this.stack[len(this.stack)-1]
    if diff < 0 {
        return int(this.min)
    }
    return int(this.min + diff)
}

func (this *MinStack) GetMin() int {
    return int(this.min)
}
*/
```

</div>

______________________________________________________________________

## ğŸ¥ ç¤ºä¾‹æ¼”ç¤º

ä»¥è¾“å…¥ `[-2, 0, -3]` ä¸ºä¾‹ï¼š

| æ“ä½œ | mainStack | minStack | è¯´æ˜ |
|------------|-----------|----------|--------------------------|
| push(-2) | [-2] | [-2] | é¦–æ¬¡å…¥æ ˆï¼Œmin=-2 |
| push(0) | [-2,0] | [-2] | 0 > -2ï¼ŒminStack ä¸å˜ |
| push(-3) | [-2,0,-3] | [-2,-3] | -3 < -2ï¼ŒminStack å…¥ -3 |
| getMin() | â€” | â€” | è¿”å› -3 âœ… |
| pop() | [-2,0] | [-2] | å¼¹å‡º -3ï¼ŒminStack ä¹Ÿå¼¹å‡º |
| top() | â€” | â€” | è¿”å› 0 âœ… |
| getMin() | â€” | â€” | è¿”å› -2 âœ… |

______________________________________________________________________

## âœ… ç­”æ¡ˆæœ‰æ•ˆæ€§è¯æ˜

- **æ­£ç¡®æ€§**ï¼š
  - `minStack` å§‹ç»ˆç»´æŠ¤ä»æ ˆåº•åˆ°å½“å‰æ ˆé¡¶çš„**éä¸¥æ ¼é€’å‡åºåˆ—**ã€‚
  - æ¯æ¬¡ `pop` æ—¶ï¼Œè‹¥ä¸»æ ˆå¼¹å‡ºçš„æ˜¯å½“å‰æœ€å°å€¼ï¼Œåˆ™ `minStack` ä¹ŸåŒæ­¥å¼¹å‡ºï¼Œä¿è¯ `minStack` æ ˆé¡¶å§‹ç»ˆä¸ºå½“å‰æœ€å°å€¼ã€‚
- **è¾¹ç•Œæƒ…å†µ**ï¼š
  - ç©ºæ ˆï¼šé¢˜ç›®ä¿è¯ä¸ä¼šåœ¨ç©ºæ ˆä¸Šè°ƒç”¨ `pop`/`top`/`getMin`ã€‚
  - é‡å¤æœ€å°å€¼ï¼šå¦‚ `[2,1,1]`ï¼Œ`minStack = [2,1,1]`ï¼Œ`pop` ä¸€æ¬¡åä»èƒ½æ­£ç¡®è¿”å› `1`ã€‚

______________________________________________________________________

## ğŸ“Š å¤æ‚åº¦åˆ†æ

| æ–¹æ³• | æ—¶é—´å¤æ‚åº¦ï¼ˆå‡æ‘Šï¼‰ | ç©ºé—´å¤æ‚åº¦ | è¯´æ˜ |
|--------------|-------------------|------------------|--------------------------|
| è¾…åŠ©æ ˆ | O(1) | O(n) | æœ€åæƒ…å†µ minStack = n |
| å•æ ˆå·®å€¼æ³• | O(1) | O(n) | ä»…ç”¨ä¸€ä¸ªæ ˆï¼Œä½†éœ€å¤„ç†æº¢å‡º |
| æš´åŠ›æ³• | O(n) | O(n) | ä¸ç¬¦åˆé¢˜æ„ âŒ |

> ğŸ’¡ å®é™…å·¥ç¨‹ä¸­æ¨è**è¾…åŠ©æ ˆæ³•**ï¼Œä»£ç æ¸…æ™°ã€æ— æº¢å‡ºé£é™©ã€‚

______________________________________________________________________

## ğŸ“Œ é—®é¢˜æ€»ç»“

- **æ ¸å¿ƒæ€æƒ³**ï¼šç”¨ç©ºé—´æ¢æ—¶é—´ï¼Œé€šè¿‡é¢å¤–æ•°æ®ç»“æ„è®°å½•å†å²æœ€å°å€¼ã€‚
- **å…³é”®æŠ€å·§**ï¼š
  - è¾…åŠ©æ ˆç»´æŠ¤**å•è°ƒéå¢åºåˆ—**ã€‚
  - æ³¨æ„ `<=` è€Œé `<`ï¼Œä»¥å¤„ç†é‡å¤æœ€å°å€¼ã€‚
- **æ‰©å±•æ€è€ƒ**ï¼š
  - è‹¥è¦æ±‚ **æœ€å¤§æ ˆ**ï¼ŒåŒç†å¯ç”¨è¾…åŠ©æ ˆã€‚
  - è‹¥è¦æ±‚ **ä¸­ä½æ•°æ ˆ**ï¼Œåˆ™éœ€æ›´å¤æ‚ç»“æ„ï¼ˆå¦‚åŒå †ï¼‰ã€‚
