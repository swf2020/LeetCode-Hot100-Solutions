# 198. æ‰“å®¶åŠ«èˆ

ğŸ“Œ [LeetCode ä¸­æ–‡é“¾æ¥](https://leetcode.cn/problems/house-robber?envType=problem-list-v2&envId=2cktkvj)

## é¢˜ç›®æè¿°

ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å°å·ï¼Œè®¡åˆ’å·çªƒæ²¿è¡—çš„æˆ¿å±‹ã€‚æ¯é—´æˆ¿å†…éƒ½è—æœ‰ä¸€å®šçš„ç°é‡‘ï¼Œå½±å“ä½ å·çªƒçš„å”¯ä¸€åˆ¶çº¦å› ç´ å°±æ˜¯ç›¸é‚»çš„æˆ¿å±‹è£…æœ‰ç›¸äº’è¿é€šçš„é˜²ç›—ç³»ç»Ÿï¼Œå¦‚æœä¸¤é—´ç›¸é‚»çš„æˆ¿å±‹åœ¨åŒä¸€æ™šä¸Šè¢«å°å·é—¯å…¥ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æŠ¥è­¦ã€‚

ç»™å®šä¸€ä¸ªä»£è¡¨æ¯ä¸ªæˆ¿å±‹å­˜æ”¾é‡‘é¢çš„éè´Ÿæ•´æ•°æ•°ç»„ï¼Œè®¡ç®—ä½  **ä¸è§¦åŠ¨è­¦æŠ¥è£…ç½®çš„æƒ…å†µä¸‹** ï¼Œä¸€å¤œä¹‹å†…èƒ½å¤Ÿå·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ã€‚

______________________________________________________________________

## ç¤ºä¾‹è¯´æ˜

âœ… **ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼š[1,2,3,1]
è¾“å‡ºï¼š4
è§£é‡Šï¼šå·çªƒ 1 å·æˆ¿å±‹ (é‡‘é¢ = 1) ï¼Œç„¶åå·çªƒ 3 å·æˆ¿å±‹ (é‡‘é¢ = 3)ã€‚
     å·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ = 1 + 3 = 4 ã€‚
```

âœ… **ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼š[2,7,9,3,1]
è¾“å‡ºï¼š12
è§£é‡Šï¼šå·çªƒ 1 å·æˆ¿å±‹ (é‡‘é¢ = 2), å·çªƒ 3 å·æˆ¿å±‹ (é‡‘é¢ = 9)ï¼Œæ¥ç€å·çªƒ 5 å·æˆ¿å±‹ (é‡‘é¢ = 1)ã€‚
     å·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ = 2 + 9 + 1 = 12 ã€‚
```

âœ… **ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼š[2,1,1,2]
è¾“å‡ºï¼š4
è§£é‡Šï¼šå·çªƒ 1 å·å’Œ 4 å·æˆ¿å±‹ï¼Œæ€»é‡‘é¢ä¸º 2 + 2 = 4ã€‚
```

______________________________________________________________________

## è§£é¢˜æ€è·¯

ğŸ’¡ è¿™æ˜¯ä¸€é“ç»å…¸çš„ **åŠ¨æ€è§„åˆ’ï¼ˆDynamic Programmingï¼‰** é—®é¢˜ã€‚

### æ ¸å¿ƒè§‚å¯Ÿ

- å¯¹äºç¬¬ `i` ä¸ªæˆ¿å­ï¼Œä½ æœ‰ä¸¤ä¸ªé€‰æ‹©ï¼š
  - **å·**ï¼šé‚£ä¹ˆä½ ä¸èƒ½å·ç¬¬ `i-1` ä¸ªæˆ¿å­ï¼Œæ€»é‡‘é¢ = `dp[i-2] + nums[i]`
  - **ä¸å·**ï¼šé‚£ä¹ˆæ€»é‡‘é¢ = `dp[i-1]`
- å› æ­¤ï¼ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸ºï¼š
  ```
  dp[i] = max(dp[i-1], dp[i-2] + nums[i])
  ```

### æ­¥éª¤è¯¦è§£

1. **å®šä¹‰çŠ¶æ€**ï¼š`dp[i]` è¡¨ç¤ºå·åˆ°ç¬¬ `i` ä¸ªæˆ¿å­æ—¶èƒ½è·å¾—çš„æœ€å¤§é‡‘é¢ã€‚
1. **åˆå§‹æ¡ä»¶**ï¼š
   - `dp[0] = nums[0]`ï¼ˆåªæœ‰ä¸€ä¸ªæˆ¿å­ï¼‰
   - `dp[1] = max(nums[0], nums[1])`ï¼ˆä¸¤ä¸ªæˆ¿å­ï¼Œé€‰å¤§çš„ï¼‰
1. **çŠ¶æ€è½¬ç§»**ï¼šä» `i = 2` å¼€å§‹ï¼ŒæŒ‰ä¸Šè¿°å…¬å¼é€’æ¨ã€‚
1. **ç»“æœ**ï¼š`dp[n-1]` å³ä¸ºç­”æ¡ˆã€‚

### ä¼˜åŒ–ç©ºé—´

ç”±äº `dp[i]` åªä¾èµ–å‰ä¸¤ä¸ªçŠ¶æ€ï¼Œå¯ä»¥ç”¨ä¸¤ä¸ªå˜é‡ä»£æ›¿æ•´ä¸ªæ•°ç»„ï¼Œå°†ç©ºé—´å¤æ‚åº¦ä» O(n) é™åˆ° O(1)ã€‚

______________________________________________________________________

## å¤šç§è§£æ³•

| è§£æ³• | æ€è·¯ | æ—¶é—´å¤æ‚åº¦ | ç©ºé—´å¤æ‚åº¦ |
|------|------|------------|------------|
| âœ… åŠ¨æ€è§„åˆ’ï¼ˆæ•°ç»„ï¼‰ | ä½¿ç”¨ `dp` æ•°ç»„å­˜å‚¨ä¸­é—´ç»“æœ | O(n) | O(n) |
| âœ… åŠ¨æ€è§„åˆ’ï¼ˆæ»šåŠ¨å˜é‡ï¼‰ | ä»…ç”¨ä¸¤ä¸ªå˜é‡è®°å½•å‰ä¸¤ä¸ªçŠ¶æ€ | O(n) | O(1) |
| âŒ æš´åŠ›é€’å½’ | æšä¸¾æ‰€æœ‰å¯èƒ½ç»„åˆï¼ˆæŒ‡æ•°çº§ï¼Œè¶…æ—¶ï¼‰ | O(2^n) | O(n) |

> ğŸ’¡ æ¨èä½¿ç”¨ **æ»šåŠ¨å˜é‡** çš„ DP è§£æ³•ï¼Œç®€æ´é«˜æ•ˆã€‚

______________________________________________________________________

## ä»£ç å®ç°

<div class="code-tabs">

```java:Java
class Solution {
    public int rob(int[] nums) {
        if (nums == null || nums.length == 0) return 0;
        int n = nums.length;
        if (n == 1) return nums[0];
        
        // ä½¿ç”¨ä¸¤ä¸ªå˜é‡ä»£æ›¿ dp æ•°ç»„
        int prev2 = nums[0];          // dp[i-2]
        int prev1 = Math.max(nums[0], nums[1]); // dp[i-1]
        
        for (int i = 2; i < n; i++) {
            int current = Math.max(prev1, prev2 + nums[i]);
            prev2 = prev1;
            prev1 = current;
        }
        
        return prev1;
    }
}
```

```go:Go
func rob(nums []int) int {
    n := len(nums)
    if n == 0 {
        return 0
    }
    if n == 1 {
        return nums[0]
    }
    
    // ä½¿ç”¨ä¸¤ä¸ªå˜é‡ä»£æ›¿ dp æ•°ç»„
    prev2 := nums[0]           // dp[i-2]
    prev1 := max(nums[0], nums[1]) // dp[i-1]
    
    for i := 2; i < n; i++ {
        current := max(prev1, prev2+nums[i])
        prev2 = prev1
        prev1 = current
    }
    
    return prev1
}

func max(a, b int) int {
    if a > b {
        return a
    }
    return b
}
```

</div>

______________________________________________________________________

## ç¤ºä¾‹æ¼”ç¤º

ä»¥ `nums = [2,7,9,3,1]` ä¸ºä¾‹ï¼š

| i | nums[i] | prev2 | prev1 | current = max(prev1, prev2 + nums[i]) |
|---|--------|-------|-------|----------------------------------------|
| 0 | 2 | - | - | åˆå§‹åŒ–ï¼šprev2 = 2 |
| 1 | 7 | - | - | prev1 = max(2,7) = 7 |
| 2 | 9 | 2 | 7 | max(7, 2+9)=11 â†’ prev2=7, prev1=11 |
| 3 | 3 | 7 | 11 | max(11, 7+3)=11 â†’ prev2=11, prev1=11 |
| 4 | 1 | 11 | 11 | max(11, 11+1)=12 |

âœ… æœ€ç»ˆç»“æœï¼š**12**

______________________________________________________________________

## ç­”æ¡ˆæœ‰æ•ˆæ€§è¯æ˜

æˆ‘ä»¬ä½¿ç”¨ **æ•°å­¦å½’çº³æ³•** è¯æ˜è¯¥ DP è§£æ³•çš„æ­£ç¡®æ€§ï¼š

- **åŸºç¡€æƒ…å†µ**ï¼š
  - `n=1`ï¼šåªèƒ½å·ç¬¬ä¸€ä¸ªï¼Œæ­£ç¡®ã€‚
  - `n=2`ï¼šå·é‡‘é¢æ›´å¤§çš„é‚£ä¸ªï¼Œæ­£ç¡®ã€‚
- **å½’çº³å‡è®¾**ï¼šå‡è®¾å¯¹äºå‰ `k` ä¸ªæˆ¿å­ï¼ˆ`k â‰¥ 2`ï¼‰ï¼Œ`dp[k]` æ˜¯æœ€ä¼˜è§£ã€‚
- **å½’çº³æ­¥éª¤**ï¼šè€ƒè™‘ç¬¬ `k+1` ä¸ªæˆ¿å­ï¼š
  - è‹¥ä¸å·ï¼Œåˆ™æœ€å¤§é‡‘é¢ä¸º `dp[k]`
  - è‹¥å·ï¼Œåˆ™ä¸èƒ½å·ç¬¬ `k` ä¸ªï¼Œæœ€å¤§é‡‘é¢ä¸º `dp[k-1] + nums[k+1]`
  - å–ä¸¤è€…æœ€å¤§å€¼ï¼Œå³ `dp[k+1] = max(dp[k], dp[k-1] + nums[k+1])`
  - ç”±å½’çº³å‡è®¾ï¼Œ`dp[k]` å’Œ `dp[k-1]` å‡ä¸ºæœ€ä¼˜ï¼Œæ•… `dp[k+1]` ä¹Ÿæ˜¯æœ€ä¼˜ã€‚

å› æ­¤ï¼Œç®—æ³•æ­£ç¡®ã€‚

______________________________________________________________________

## å¤æ‚åº¦åˆ†æ

| é¡¹ç›® | åˆ†æ |
|------|------|
| âœ… æ—¶é—´å¤æ‚åº¦ | `O(n)`ï¼Œä»…éœ€éå†ä¸€æ¬¡æ•°ç»„ |
| âœ… ç©ºé—´å¤æ‚åº¦ | `O(1)`ï¼Œä»…ä½¿ç”¨å¸¸æ•°é¢å¤–ç©ºé—´ |

______________________________________________________________________

## é—®é¢˜æ€»ç»“

- ğŸ”‘ **æ ¸å¿ƒæ€æƒ³**ï¼šåŠ¨æ€è§„åˆ’ï¼Œå½“å‰å†³ç­–åªä¾èµ–å‰ä¸¤ä¸ªçŠ¶æ€ã€‚
- ğŸ§  **å…³é”®æ´å¯Ÿ**ï¼šä¸èƒ½å·ç›¸é‚»æˆ¿å±‹ â†’ æ¯æ­¥é€‰æ‹©â€œå·â€æˆ–â€œä¸å·â€ï¼Œå–æœ€å¤§å€¼ã€‚
- ğŸ› ï¸ **å·¥ç¨‹æŠ€å·§**ï¼šç”¨æ»šåŠ¨å˜é‡ä¼˜åŒ–ç©ºé—´ï¼Œé¿å…å†—ä½™æ•°ç»„ã€‚
- ğŸ“ˆ **æ‰©å±•æ€è€ƒ**ï¼šæ­¤é¢˜æ˜¯â€œæ‰“å®¶åŠ«èˆâ€ç³»åˆ—çš„åŸºç¡€ï¼Œåç»­è¿˜æœ‰ç¯å½¢æˆ¿å±‹ï¼ˆ198 â†’ 213ï¼‰ã€æ ‘å½¢ç»“æ„ï¼ˆ337ï¼‰ç­‰å˜ç§ã€‚

> ğŸ’¡ **ä¸€å¥è¯æ€»ç»“**ï¼š**â€œéš”ä¸€å·ä¸€ï¼Œè´ªå¿ƒä¸è¡Œï¼ŒDP æœ€è¡Œï¼â€**
