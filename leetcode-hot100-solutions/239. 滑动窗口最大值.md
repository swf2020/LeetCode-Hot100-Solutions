# âŒ|âœ…|ğŸ’¡|ğŸ“Œ 239. æ»‘åŠ¨çª—å£æœ€å¤§å€¼

## ğŸ”— é—®é¢˜ç®€ä»‹

[LeetCode 239. æ»‘åŠ¨çª—å£æœ€å¤§å€¼](https://leetcode.cn/problems/sliding-window-maximum?envType=problem-list-v2&envId=2cktkvj)

### ğŸ“ é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums`ï¼Œæœ‰ä¸€ä¸ªå¤§å°ä¸º `k` çš„æ»‘åŠ¨çª—å£ä»æ•°ç»„çš„æœ€å·¦ä¾§ç§»åŠ¨åˆ°æ•°ç»„çš„æœ€å³ä¾§ã€‚ä½ åªå¯ä»¥çœ‹åˆ°åœ¨æ»‘åŠ¨çª—å£å†…çš„ `k` ä¸ªæ•°å­—ã€‚æ»‘åŠ¨çª—å£æ¯æ¬¡åªå‘å³ç§»åŠ¨ä¸€ä½ã€‚

è¿”å› *æ»‘åŠ¨çª—å£ä¸­çš„æœ€å¤§å€¼*ã€‚

______________________________________________________________________

## ğŸ§ª ç¤ºä¾‹è¯´æ˜

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [1,3,-1,-3,5,3,6,7], k = 3
è¾“å‡ºï¼š[3,3,5,5,6,7]
è§£é‡Šï¼š
æ»‘åŠ¨çª—å£çš„ä½ç½®                æœ€å¤§å€¼
---------------               -----
[1  3  -1] -3  5  3  6  7       3
 1 [3  -1  -3] 5  3  6  7       3
 1  3 [-1  -3  5] 3  6  7       5
 1  3  -1 [-3  5  3] 6  7       5
 1  3  -1  -3 [5  3  6] 7       6
 1  3  -1  -3  5 [3  6  7]      7
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [1], k = 1
è¾“å‡ºï¼š[1]
```

______________________________________________________________________

## ğŸ’¡ è§£é¢˜æ€è·¯

### æ–¹æ³•ä¸€ï¼šæš´åŠ›æ³•ï¼ˆâŒ è¶…æ—¶ï¼‰

- å¯¹æ¯ä¸ªçª—å£éå† `k` ä¸ªå…ƒç´ æ‰¾æœ€å¤§å€¼ã€‚
- æ—¶é—´å¤æ‚åº¦é«˜ï¼Œä¸é€‚ç”¨äºå¤§è¾“å…¥ã€‚

### æ–¹æ³•äºŒï¼šä¼˜å…ˆé˜Ÿåˆ—ï¼ˆå †ï¼‰ï¼ˆâœ… å¯è¡Œä½†éæœ€ä¼˜ï¼‰

- ä½¿ç”¨æœ€å¤§å †å­˜å‚¨ `(å€¼, ç´¢å¼•)`ã€‚
- æ¯æ¬¡å–å †é¡¶ï¼Œè‹¥ç´¢å¼•ä¸åœ¨å½“å‰çª—å£å†…åˆ™å¼¹å‡ºã€‚
- æ—¶é—´å¤æ‚åº¦ï¼šO(n log n)ï¼Œç©ºé—´ O(n)ã€‚

### æ–¹æ³•ä¸‰ï¼šå•è°ƒåŒç«¯é˜Ÿåˆ—ï¼ˆâœ… æœ€ä¼˜è§£ï¼‰

> **æ ¸å¿ƒæ€æƒ³**ï¼šç»´æŠ¤ä¸€ä¸ª**å•è°ƒé€’å‡**çš„åŒç«¯é˜Ÿåˆ—ï¼ˆdequeï¼‰ï¼Œé˜Ÿé¦–å§‹ç»ˆæ˜¯å½“å‰çª—å£çš„æœ€å¤§å€¼ã€‚

#### æ­¥éª¤è¯¦è§£ï¼š

1. **åˆå§‹åŒ–**ï¼šåˆ›å»ºä¸€ä¸ªåŒç«¯é˜Ÿåˆ— `deque` å­˜å‚¨æ•°ç»„ç´¢å¼•ï¼Œç»“æœåˆ—è¡¨ `res`ã€‚
1. **éå†æ•°ç»„**ï¼ˆi ä» 0 åˆ° n-1ï¼‰ï¼š
   - **ç§»é™¤é˜Ÿå°¾è¾ƒå°å…ƒç´ **ï¼šè‹¥ `nums[i] >= nums[deque.back()]`ï¼Œåˆ™ä¸æ–­å¼¹å‡ºé˜Ÿå°¾ï¼Œä¿æŒé˜Ÿåˆ—å•è°ƒé€’å‡ã€‚
   - **åŠ å…¥å½“å‰ç´¢å¼•**ï¼šå°† `i` åŠ å…¥é˜Ÿå°¾ã€‚
   - **ç§»é™¤é˜Ÿé¦–è¿‡æœŸç´¢å¼•**ï¼šè‹¥é˜Ÿé¦–ç´¢å¼• `<= i - k`ï¼ˆå³ä¸åœ¨å½“å‰çª—å£ï¼‰ï¼Œåˆ™å¼¹å‡ºé˜Ÿé¦–ã€‚
   - **è®°å½•ç»“æœ**ï¼šå½“ `i >= k - 1`ï¼ˆå³ç¬¬ä¸€ä¸ªå®Œæ•´çª—å£å½¢æˆï¼‰ï¼Œå°† `nums[deque.front()]` åŠ å…¥ç»“æœã€‚
1. è¿”å›ç»“æœæ•°ç»„ã€‚

> âœ… **ä¸ºä»€ä¹ˆæœ‰æ•ˆï¼Ÿ**
>
> - é˜Ÿåˆ—ä¸­ç´¢å¼•å¯¹åº”çš„å€¼å•è°ƒé€’å‡ â†’ é˜Ÿé¦–æ˜¯æœ€å¤§å€¼ã€‚
> - åŠæ—¶ç§»é™¤è¿‡æœŸç´¢å¼• â†’ ä¿è¯é˜Ÿé¦–åœ¨çª—å£å†…ã€‚
> - æ¯ä¸ªå…ƒç´ æœ€å¤šå…¥é˜Ÿå‡ºé˜Ÿä¸€æ¬¡ â†’ çº¿æ€§æ—¶é—´ã€‚

______________________________________________________________________

## ğŸ’» ä»£ç å®ç°

<div class="code-tabs">

```java:Java
class Solution {
    public int[] maxSlidingWindow(int[] nums, int k) {
        if (nums == null || k <= 0) return new int[0];
        int n = nums.length;
        int[] res = new int[n - k + 1];
        Deque<Integer> deque = new ArrayDeque<>(); // å­˜å‚¨ç´¢å¼•
        
        for (int i = 0; i < n; i++) {
            // ç§»é™¤é˜Ÿå°¾ï¼šä¿æŒå•è°ƒé€’å‡
            while (!deque.isEmpty() && nums[i] >= nums[deque.peekLast()]) {
                deque.pollLast();
            }
            deque.offerLast(i);
            
            // ç§»é™¤é˜Ÿé¦–è¿‡æœŸç´¢å¼•
            if (deque.peekFirst() <= i - k) {
                deque.pollFirst();
            }
            
            // è®°å½•ç»“æœï¼ˆä»ç¬¬kä¸ªå…ƒç´ å¼€å§‹ï¼‰
            if (i >= k - 1) {
                res[i - k + 1] = nums[deque.peekFirst()];
            }
        }
        return res;
    }
}
```

```go:Go
func maxSlidingWindow(nums []int, k int) []int {
    if len(nums) == 0 || k <= 0 {
        return []int{}
    }
    n := len(nums)
    res := make([]int, 0, n-k+1)
    deque := make([]int, 0) // å­˜å‚¨ç´¢å¼•
    
    for i := 0; i < n; i++ {
        // ç§»é™¤é˜Ÿå°¾ï¼šä¿æŒå•è°ƒé€’å‡
        for len(deque) > 0 && nums[i] >= nums[deque[len(deque)-1]] {
            deque = deque[:len(deque)-1]
        }
        deque = append(deque, i)
        
        // ç§»é™¤é˜Ÿé¦–è¿‡æœŸç´¢å¼•
        if deque[0] <= i-k {
            deque = deque[1:]
        }
        
        // è®°å½•ç»“æœï¼ˆä»ç¬¬kä¸ªå…ƒç´ å¼€å§‹ï¼‰
        if i >= k-1 {
            res = append(res, nums[deque[0]])
        }
    }
    return res
}
```

</div>

______________________________________________________________________

## ğŸ¯ ç¤ºä¾‹æ¼”ç¤º

ä»¥ `nums = [1,3,-1,-3,5,3,6,7], k = 3` ä¸ºä¾‹ï¼š

| i | nums[i] | deque (ç´¢å¼•) | deque (å€¼) | æ˜¯å¦è®°å½• | res |
|---|--------|--------------|------------|----------|-----|
| 0 | 1 | [0] | [1] | å¦ | [] |
| 1 | 3 | [1] | [3] | å¦ | [] |
| 2 | -1 | [1,2] | [3,-1] | æ˜¯ | [3] |
| 3 | -3 | [1,2,3] | [3,-1,-3] | æ˜¯ | [3,3] |
| 4 | 5 | [4] | [5] | æ˜¯ | [3,3,5] |
| 5 | 3 | [4,5] | [5,3] | æ˜¯ | [3,3,5,5] |
| 6 | 6 | [6] | [6] | æ˜¯ | [3,3,5,5,6] |
| 7 | 7 | [7] | [7] | æ˜¯ | [3,3,5,5,6,7] |

> âœ… é˜Ÿåˆ—å§‹ç»ˆä¿æŒå•è°ƒé€’å‡ï¼Œé˜Ÿé¦–ä¸ºçª—å£æœ€å¤§å€¼ã€‚

______________________________________________________________________

## âœ… ç­”æ¡ˆæœ‰æ•ˆæ€§è¯æ˜

1. **æ­£ç¡®æ€§**ï¼š

   - é˜Ÿåˆ—å•è°ƒé€’å‡ â‡’ é˜Ÿé¦–æ˜¯å½“å‰çª—å£æœ€å¤§å€¼ã€‚
   - è¿‡æœŸç´¢å¼•è¢«åŠæ—¶ç§»é™¤ â‡’ é˜Ÿé¦–å§‹ç»ˆåœ¨çª—å£ `[i-k+1, i]` å†…ã€‚
   - æ¯ä¸ªçª—å£æ°å¥½è®°å½•ä¸€æ¬¡ â‡’ ç»“æœé•¿åº¦ä¸º `n - k + 1`ã€‚

1. **è¾¹ç•Œå¤„ç†**ï¼š

   - `k = 1`ï¼šæ¯ä¸ªå…ƒç´ å•ç‹¬æˆçª—ï¼Œç»“æœå³åŸæ•°ç»„ã€‚
   - `k = n`ï¼šæ•´ä¸ªæ•°ç»„ä¸€ä¸ªçª—å£ï¼Œç»“æœä¸ºå…¨å±€æœ€å¤§å€¼ã€‚

______________________________________________________________________

## ğŸ“Š å¤æ‚åº¦åˆ†æ

| æ–¹æ³• | æ—¶é—´å¤æ‚åº¦ | ç©ºé—´å¤æ‚åº¦ | è¯´æ˜ |
|------|------------|------------|------|
| æš´åŠ›æ³• | O(nk) | O(1) | æ¯ä¸ªçª—å£éå†kæ¬¡ |
| ä¼˜å…ˆé˜Ÿåˆ— | O(n log n) | O(n) | å †æ“ä½œlog n |
| **å•è°ƒé˜Ÿåˆ—** | **O(n)** | **O(k)** | **æ¯ä¸ªå…ƒç´ å…¥é˜Ÿå‡ºé˜Ÿå„ä¸€æ¬¡** |

> âœ… å•è°ƒé˜Ÿåˆ—æ˜¯æœ€ä¼˜è§£ï¼Œçº¿æ€§æ—¶é—´ï¼Œå¸¸æ•°ç©ºé—´ï¼ˆå¿½ç•¥ç»“æœæ•°ç»„ï¼‰ã€‚

______________________________________________________________________

## ğŸ“Œ é—®é¢˜æ€»ç»“

- **å…³é”®æ´å¯Ÿ**ï¼šæ»‘åŠ¨çª—å£æœ€å¤§å€¼é—®é¢˜æœ¬è´¨æ˜¯**åŠ¨æ€ç»´æŠ¤åŒºé—´æœ€å€¼**ï¼Œé€‚åˆç”¨**å•è°ƒé˜Ÿåˆ—**ã€‚
- **æŠ€å·§**ï¼šé˜Ÿåˆ—å­˜**ç´¢å¼•**è€Œéå€¼ï¼Œä¾¿äºåˆ¤æ–­æ˜¯å¦è¿‡æœŸã€‚
- **æ‰©å±•**ï¼šç±»ä¼¼é—®é¢˜å¦‚â€œæ»‘åŠ¨çª—å£ä¸­ä½æ•°â€å¯ç”¨åŒå †ï¼Œâ€œæœ€å°å€¼â€åªéœ€æ”¹ä¸ºå•è°ƒé€’å¢é˜Ÿåˆ—ã€‚
- **é¢è¯•é‡ç‚¹**ï¼šå•è°ƒé˜Ÿåˆ—æ˜¯é«˜é¢‘è€ƒç‚¹ï¼Œéœ€ç†Ÿç»ƒæŒæ¡å…¶ç»´æŠ¤é€»è¾‘ä¸åº”ç”¨åœºæ™¯ã€‚
