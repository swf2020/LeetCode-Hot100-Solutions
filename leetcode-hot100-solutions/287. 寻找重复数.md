# âŒ|âœ…|ğŸ’¡|ğŸ“Œ 287. å¯»æ‰¾é‡å¤æ•°

## ğŸ”— é—®é¢˜ç®€ä»‹

é¢˜ç›®é“¾æ¥ï¼š[LeetCode 287. å¯»æ‰¾é‡å¤æ•°](https://leetcode.cn/problems/find-the-duplicate-number?envType=problem-list-v2&envId=2cktkvj)

### ğŸ“ é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªåŒ…å« `n + 1` ä¸ªæ•´æ•°çš„æ•°ç»„ `nums`ï¼Œå…¶æ•°å­—éƒ½åœ¨ `[1, n]` èŒƒå›´å†…ï¼ˆåŒ…æ‹¬ `1` å’Œ `n`ï¼‰ï¼Œå¯çŸ¥è‡³å°‘å­˜åœ¨ä¸€ä¸ªé‡å¤çš„æ•´æ•°ã€‚

å‡è®¾ `nums` åªæœ‰ä¸€ä¸ªé‡å¤çš„æ•´æ•°ï¼Œè¿”å›è¿™ä¸ªé‡å¤çš„æ•°ã€‚

ä½ è®¾è®¡çš„è§£å†³æ–¹æ¡ˆå¿…é¡» **ä¸ä¿®æ”¹** æ•°ç»„ `nums` ä¸”åªç”¨å¸¸é‡çº§ `O(1)` çš„é¢å¤–ç©ºé—´ã€‚

______________________________________________________________________

## ğŸ§ª ç¤ºä¾‹è¯´æ˜

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [1,3,4,2,2]
è¾“å‡ºï¼š2
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [3,1,3,4,2]
è¾“å‡ºï¼š3
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šnums = [3,3,3,3,3]
è¾“å‡ºï¼š3
```

______________________________________________________________________

## ğŸ’¡ è§£é¢˜æ€è·¯

æœ¬é¢˜çš„å…³é”®é™åˆ¶æ¡ä»¶æ˜¯ï¼š

- **ä¸èƒ½ä¿®æ”¹åŸæ•°ç»„**
- **åªèƒ½ä½¿ç”¨ O(1) çš„é¢å¤–ç©ºé—´**

å› æ­¤ï¼Œåƒæ’åºã€å“ˆå¸Œè¡¨ç­‰å¸¸è§„æ–¹æ³•éƒ½ä¸èƒ½ç›´æ¥ä½¿ç”¨ã€‚æˆ‘ä»¬éœ€è¦æ›´å·§å¦™çš„æ–¹æ³•ã€‚

### âœ… æ–¹æ³•ä¸€ï¼šäºŒåˆ†æŸ¥æ‰¾ï¼ˆåŸºäºå€¼åŸŸï¼‰

> åˆ©ç”¨æŠ½å±‰åŸç†ï¼ˆé¸½å·¢åŸç†ï¼‰+ äºŒåˆ†ç­”æ¡ˆ

- æ•°å­—èŒƒå›´æ˜¯ `[1, n]`ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å€¼åŸŸè¿›è¡ŒäºŒåˆ†ã€‚
- å¯¹äºä¸­ç‚¹ `mid`ï¼Œç»Ÿè®¡æ•°ç»„ä¸­ â‰¤ `mid` çš„å…ƒç´ ä¸ªæ•° `cnt`ï¼š
  - å¦‚æœ `cnt > mid`ï¼Œè¯´æ˜é‡å¤æ•°åœ¨ `[1, mid]` ä¸­ï¼›
  - å¦åˆ™åœ¨ `[mid+1, n]` ä¸­ã€‚
- é€æ­¥ç¼©å°èŒƒå›´ï¼Œç›´åˆ°æ‰¾åˆ°é‡å¤æ•°ã€‚

**ä¼˜ç‚¹**ï¼šæ»¡è¶³é¢˜ç›®æ‰€æœ‰é™åˆ¶ï¼Œé€»è¾‘æ¸…æ™°ã€‚

______________________________________________________________________

### âœ… æ–¹æ³•äºŒï¼šFloyd åˆ¤åœˆç®—æ³•ï¼ˆå¿«æ…¢æŒ‡é’ˆï¼‰

> å°†æ•°ç»„è§†ä¸ºé“¾è¡¨ï¼Œåˆ©ç”¨â€œç¯â€çš„æ€æƒ³

- æŠŠæ•°ç»„çœ‹ä½œä¸€ä¸ªå‡½æ•° `f(i) = nums[i]`ï¼Œä»ç´¢å¼• 0 å¼€å§‹ä¸æ–­è·³è½¬ï¼š`0 â†’ nums[0] â†’ nums[nums[0]] â†’ ...`
- å› ä¸ºæœ‰é‡å¤æ•°ï¼Œå¿…ç„¶å½¢æˆç¯ï¼ˆå¤šä¸ªç´¢å¼•æŒ‡å‘åŒä¸€ä¸ªå€¼ï¼‰ã€‚
- ä½¿ç”¨ Floyd ç®—æ³•ï¼š
  1. å¿«æ…¢æŒ‡é’ˆæ‰¾ç¯å…¥å£ï¼ˆç¬¬ä¸€é˜¶æ®µï¼‰
  1. é‡ç½®ä¸€ä¸ªæŒ‡é’ˆåˆ°èµ·ç‚¹ï¼ŒåŒæ­¥èµ°æ‰¾å…¥å£ï¼ˆç¬¬äºŒé˜¶æ®µï¼‰

**ä¼˜ç‚¹**ï¼šæ—¶é—´å¤æ‚åº¦æœ€ä¼˜ï¼Œç©ºé—´ O(1)ï¼Œä¸ä¿®æ”¹æ•°ç»„ã€‚

______________________________________________________________________

### âŒ å…¶ä»–æ–¹æ³•ï¼ˆä¸ç¬¦åˆé¢˜æ„ï¼‰

| æ–¹æ³• | æ˜¯å¦å¯è¡Œ | åŸå›  |
|------|--------|------|
| æ’åº | âŒ | ä¿®æ”¹äº†åŸæ•°ç»„ |
| HashSet | âŒ | éœ€è¦ O(n) ç©ºé—´ |
| æ ‡è®°è´Ÿæ•° | âŒ | ä¿®æ”¹äº†åŸæ•°ç»„ |

______________________________________________________________________

## ğŸ’» ä»£ç å®ç°

<div class="code-tabs">

```java:Java
// æ–¹æ³•ä¸€ï¼šäºŒåˆ†æŸ¥æ‰¾ï¼ˆå€¼åŸŸï¼‰
class Solution {
    public int findDuplicate(int[] nums) {
        int n = nums.length - 1;
        int left = 1, right = n;
        while (left < right) {
            int mid = left + (right - left) / 2;
            int cnt = 0;
            for (int num : nums) {
                if (num <= mid) cnt++;
            }
            if (cnt > mid) {
                right = mid;
            } else {
                left = mid + 1;
            }
        }
        return left;
    }
}

// æ–¹æ³•äºŒï¼šFloyd åˆ¤åœˆç®—æ³•
class Solution {
    public int findDuplicate(int[] nums) {
        // ç¬¬ä¸€é˜¶æ®µï¼šæ‰¾ç›¸é‡ç‚¹
        int slow = nums[0], fast = nums[0];
        do {
            slow = nums[slow];
            fast = nums[nums[fast]];
        } while (slow != fast);

        // ç¬¬äºŒé˜¶æ®µï¼šæ‰¾ç¯å…¥å£
        slow = nums[0];
        while (slow != fast) {
            slow = nums[slow];
            fast = nums[fast];
        }
        return slow;
    }
}
```

```go:Go
// æ–¹æ³•ä¸€ï¼šäºŒåˆ†æŸ¥æ‰¾ï¼ˆå€¼åŸŸï¼‰
func findDuplicate(nums []int) int {
    n := len(nums) - 1
    left, right := 1, n
    for left < right {
        mid := left + (right-left)/2
        cnt := 0
        for _, num := range nums {
            if num <= mid {
                cnt++
            }
        }
        if cnt > mid {
            right = mid
        } else {
            left = mid + 1
        }
    }
    return left
}

// æ–¹æ³•äºŒï¼šFloyd åˆ¤åœˆç®—æ³•
func findDuplicate(nums []int) int {
    // ç¬¬ä¸€é˜¶æ®µï¼šæ‰¾ç›¸é‡ç‚¹
    slow, fast := nums[0], nums[0]
    for {
        slow = nums[slow]
        fast = nums[nums[fast]]
        if slow == fast {
            break
        }
    }

    // ç¬¬äºŒé˜¶æ®µï¼šæ‰¾ç¯å…¥å£
    slow = nums[0]
    for slow != fast {
        slow = nums[slow]
        fast = nums[fast]
    }
    return slow
}
```

</div>

______________________________________________________________________

## ğŸ¯ ç¤ºä¾‹æ¼”ç¤ºï¼ˆä»¥ Floyd ç®—æ³•ä¸ºä¾‹ï¼‰

ä»¥ `nums = [1,3,4,2,2]` ä¸ºä¾‹ï¼š

- ç´¢å¼•ï¼š0 â†’ 1 â†’ 3 â†’ 2 â†’ 4 â†’ 2 â†’ 4 â†’ ...
- å€¼ï¼š 1 â†’ 3 â†’ 2 â†’ 4 â†’ 2 â†’ 4 â†’ ...

è·¯å¾„å½¢æˆç¯ï¼š`2 â†’ 4 â†’ 2`ï¼Œç¯å…¥å£æ˜¯ `2`ï¼Œå³é‡å¤æ•°ã€‚

å¿«æ…¢æŒ‡é’ˆï¼š

- slow: 1 â†’ 3 â†’ 2 â†’ 4 â†’ 2
- fast: 1 â†’ 2 â†’ 2 â†’ 4 â†’ 2ï¼ˆä¸¤å€é€Ÿï¼‰

ç›¸é‡åï¼Œé‡ç½® slow åˆ°èµ·ç‚¹ï¼ŒåŒæ­¥èµ°ï¼Œæœ€ç»ˆåœ¨ `2` ç›¸é‡ã€‚

______________________________________________________________________

## âœ… ç­”æ¡ˆæœ‰æ•ˆæ€§è¯æ˜

### æ–¹æ³•ä¸€ï¼ˆäºŒåˆ†ï¼‰ï¼š

- ç”±æŠ½å±‰åŸç†ï¼šè‹¥ `[1, mid]` ä¸­æœ‰è¶…è¿‡ `mid` ä¸ªæ•°ï¼Œåˆ™å¿…æœ‰é‡å¤è½åœ¨è¯¥åŒºé—´ã€‚
- æ¯æ¬¡äºŒåˆ†éƒ½èƒ½æ­£ç¡®ç¼©å°æœç´¢èŒƒå›´ï¼Œæœ€ç»ˆæ”¶æ•›åˆ°å”¯ä¸€é‡å¤æ•°ã€‚

### æ–¹æ³•äºŒï¼ˆFloydï¼‰ï¼š

- æ•°ç»„å¯è§†ä¸ºå‡½æ•° `f: i â†¦ nums[i]`ï¼Œå®šä¹‰åŸŸ `{0,1,...,n}`ï¼Œå€¼åŸŸ `{1,...,n}`ã€‚
- ç”±äº `n+1` ä¸ªè¾“å…¥æ˜ å°„åˆ° `n` ä¸ªè¾“å‡ºï¼Œå¿…æœ‰è‡³å°‘ä¸¤ä¸ªç´¢å¼• `i â‰  j` ä½¿å¾— `nums[i] = nums[j]`ï¼Œå³å­˜åœ¨ç¯ã€‚
- Floyd ç®—æ³•èƒ½æ­£ç¡®æ‰¾åˆ°ç¯çš„å…¥å£ï¼Œè€Œç¯å…¥å£å¯¹åº”çš„å€¼å³ä¸ºé‡å¤æ•°ã€‚

______________________________________________________________________

## ğŸ“Š å¤æ‚åº¦åˆ†æ

| æ–¹æ³• | æ—¶é—´å¤æ‚åº¦ | ç©ºé—´å¤æ‚åº¦ | æ˜¯å¦ä¿®æ”¹æ•°ç»„ |
|------|-----------|-----------|-------------|
| äºŒåˆ†æŸ¥æ‰¾ | O(n log n) | O(1) | âŒ |
| Floyd åˆ¤åœˆ | O(n) | O(1) | âŒ |

> Floyd æ–¹æ³•åœ¨æ—¶é—´ä¸Šæ›´ä¼˜ï¼Œä½†ç†è§£éš¾åº¦ç•¥é«˜ï¼›äºŒåˆ†æ–¹æ³•æ›´ç›´è§‚ã€‚

______________________________________________________________________

## ğŸ“Œ é—®é¢˜æ€»ç»“

- æœ¬é¢˜æ˜¯ç»å…¸â€œé™åˆ¶æ¡ä»¶ä¸‹æ‰¾é‡å¤æ•°â€é—®é¢˜ï¼Œè€ƒå¯Ÿå¯¹ç®—æ³•çº¦æŸçš„ç†è§£ã€‚
- **äºŒåˆ†ç­”æ¡ˆ** æ˜¯ä¸€ç§å¼ºå¤§æŠ€å·§ï¼Œé€‚ç”¨äºâ€œå¯åˆ¤å®šæ€§â€é—®é¢˜ï¼ˆå¦‚â€œæ˜¯å¦å­˜åœ¨ â‰¤ x çš„è§£â€ï¼‰ã€‚
- **Floyd åˆ¤åœˆ** å°†æ•°ç»„æŠ½è±¡ä¸ºé“¾è¡¨ï¼Œæ˜¯è§£å†³â€œéšå¼ç¯â€é—®é¢˜çš„åˆ©å™¨ã€‚
- åœ¨é¢è¯•ä¸­ï¼Œè‹¥æ—¶é—´å…è®¸ï¼Œå»ºè®®å…ˆå†™äºŒåˆ†æ³•ï¼ˆæ˜“è§£é‡Šï¼‰ï¼Œå†ä¼˜åŒ–åˆ° Floydï¼ˆå±•ç¤ºæ·±åº¦ï¼‰ã€‚

> ğŸ’¡ **å…³é”®æ´å¯Ÿ**ï¼šå½“æ— æ³•ä½¿ç”¨é¢å¤–ç©ºé—´æ—¶ï¼Œè€ƒè™‘å°†æ•°æ®ç»“æ„æœ¬èº«ä½œä¸ºâ€œæŒ‡é’ˆâ€æ¥æ„å»ºé€»è¾‘ç»“æ„ï¼ˆå¦‚é“¾è¡¨ã€å›¾ï¼‰ã€‚
