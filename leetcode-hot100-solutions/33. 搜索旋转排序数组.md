### é—®é¢˜ç®€ä»‹

ğŸ”— [LeetCode 33. æœç´¢æ—‹è½¬æ’åºæ•°ç»„](https://leetcode.cn/problems/search-in-rotated-sorted-array?envType=problem-list-v2&envId=2cktkvj)

#### é¢˜ç›®æè¿°

æ•´æ•°æ•°ç»„ `nums` æŒ‰å‡åºæ’åˆ—ï¼Œæ•°ç»„ä¸­çš„å€¼ **äº’ä¸ç›¸åŒ**ã€‚

åœ¨ä¼ é€’ç»™å‡½æ•°ä¹‹å‰ï¼Œ`nums` åœ¨æŸä¸ªæœªçŸ¥çš„ä¸‹æ ‡ `k`ï¼ˆ`0 <= k < nums.length`ï¼‰ä¸Šè¿›è¡Œäº† **æ—‹è½¬**ï¼Œä½¿æ•°ç»„å˜ä¸º `[nums[k], nums[k+1], ..., nums[n-1], nums[0], nums[1], ..., nums[k-1]]`ï¼ˆä¸‹æ ‡ **ä» 0 å¼€å§‹** è®¡æ•°ï¼‰ã€‚ä¾‹å¦‚ï¼Œ`[0,1,2,4,5,6,7]` åœ¨ä¸‹æ ‡ `3` å¤„ç»æ—‹è½¬åå¯èƒ½å˜ä¸º `[4,5,6,7,0,1,2]`ã€‚

ç»™ä½  **æ—‹è½¬åçš„æ•°ç»„** `nums` å’Œä¸€ä¸ªæ•´æ•° `target`ï¼Œå¦‚æœ `nums` ä¸­å­˜åœ¨è¿™ä¸ªç›®æ ‡å€¼ `target`ï¼Œåˆ™è¿”å›å®ƒçš„ä¸‹æ ‡ï¼Œå¦åˆ™è¿”å› `-1`ã€‚

ä½ å¿…é¡»è®¾è®¡ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ä¸º `O(log n)` çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚

______________________________________________________________________

### ç¤ºä¾‹è¯´æ˜

âœ… **ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [4,5,6,7,0,1,2], target = 0
è¾“å‡ºï¼š4
```

âœ… **ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [4,5,6,7,0,1,2], target = 3
è¾“å‡ºï¼š-1
```

âœ… **ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šnums = [1], target = 0
è¾“å‡ºï¼š-1
```

______________________________________________________________________

### è§£é¢˜æ€è·¯

ğŸ“Œ **æ ¸å¿ƒè§‚å¯Ÿï¼š**
è™½ç„¶æ•°ç»„è¢«æ—‹è½¬äº†ï¼Œä½†å®ƒä»ç„¶ç”±ä¸¤ä¸ª**æœ‰åºå­æ•°ç»„**ç»„æˆã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨**äºŒåˆ†æŸ¥æ‰¾**çš„æ€æƒ³ï¼Œåœ¨æ¯æ¬¡è¿­ä»£ä¸­åˆ¤æ–­å“ªä¸€åŠæ˜¯æœ‰åºçš„ï¼Œå¹¶æ®æ­¤å†³å®šæœç´¢æ–¹å‘ã€‚

#### âœ… æ–¹æ³•ä¸€ï¼šæ”¹è¿›çš„äºŒåˆ†æŸ¥æ‰¾ï¼ˆæ¨èï¼‰

**æ­¥éª¤å¦‚ä¸‹ï¼š**

1. åˆå§‹åŒ– `left = 0`, `right = nums.length - 1`ã€‚
1. å½“ `left <= right`ï¼š
   - è®¡ç®—ä¸­ç‚¹ `mid = (left + right) / 2`ã€‚
   - å¦‚æœ `nums[mid] == target`ï¼Œç›´æ¥è¿”å› `mid`ã€‚
   - åˆ¤æ–­å·¦åŠéƒ¨åˆ†æ˜¯å¦æœ‰åºï¼ˆå³ `nums[left] <= nums[mid]`ï¼‰ï¼š
     - å¦‚æœæ˜¯ï¼Œåˆ™æ£€æŸ¥ `target` æ˜¯å¦åœ¨ `[nums[left], nums[mid])` èŒƒå›´å†…ï¼š
       - è‹¥åœ¨ï¼Œç¼©å°å³è¾¹ç•Œï¼š`right = mid - 1`ï¼›
       - å¦åˆ™ï¼Œæœç´¢å³åŠéƒ¨åˆ†ï¼š`left = mid + 1`ã€‚
     - å¦‚æœå·¦åŠéƒ¨åˆ†æ— åºï¼Œåˆ™å³åŠéƒ¨åˆ†ä¸€å®šæœ‰åºï¼š
       - æ£€æŸ¥ `target` æ˜¯å¦åœ¨ `(nums[mid], nums[right]]` èŒƒå›´å†…ï¼š
         - è‹¥åœ¨ï¼Œ`left = mid + 1`ï¼›
         - å¦åˆ™ï¼Œ`right = mid - 1`ã€‚
1. å¾ªç¯ç»“æŸä»æœªæ‰¾åˆ°ï¼Œè¿”å› `-1`ã€‚

ğŸ’¡ **å…³é”®ç‚¹ï¼š**

- ç”±äºæ•°ç»„å…ƒç´ äº’ä¸ç›¸åŒï¼Œ`nums[left] == nums[mid]` åªæœ‰åœ¨ `left == mid` æ—¶æˆç«‹ï¼Œæ­¤æ—¶ä»å¯è§†ä¸ºå·¦åŠæœ‰åºã€‚
- æ¯æ¬¡éƒ½èƒ½æ’é™¤ä¸€åŠçš„æœç´¢ç©ºé—´ï¼Œä¿è¯ `O(log n)` æ—¶é—´å¤æ‚åº¦ã€‚

#### âŒ æ–¹æ³•äºŒï¼šçº¿æ€§æ‰«æï¼ˆä¸æ»¡è¶³é¢˜ç›®è¦æ±‚ï¼‰

- ç›´æ¥éå†æ•°ç»„ï¼Œæ—¶é—´å¤æ‚åº¦ `O(n)`ï¼Œä¸ç¬¦åˆ `O(log n)` è¦æ±‚ï¼Œä»…ä½œå¯¹æ¯”ã€‚

#### ğŸ’¡ æ–¹æ³•ä¸‰ï¼šå…ˆæ‰¾æ—‹è½¬ç‚¹å†äºŒåˆ†ï¼ˆå¯è¡Œä½†ç•¥å¤æ‚ï¼‰

1. å…ˆç”¨äºŒåˆ†æŸ¥æ‰¾æ‰¾åˆ°æœ€å°å€¼ï¼ˆå³æ—‹è½¬ç‚¹ï¼‰çš„ä½ç½® `pivot`ã€‚
1. åˆ¤æ–­ `target` åº”è¯¥åœ¨å‰åŠæ®µè¿˜æ˜¯ååŠæ®µã€‚
1. åœ¨å¯¹åº”æ®µå†…è¿›è¡Œæ ‡å‡†äºŒåˆ†æŸ¥æ‰¾ã€‚

> è™½ç„¶ä¹Ÿæ˜¯ `O(log n)`ï¼Œä½†éœ€è¦ä¸¤æ¬¡äºŒåˆ†ï¼Œä»£ç æ›´å¤æ‚ï¼Œä¸å¦‚æ–¹æ³•ä¸€ç›´æ¥ã€‚

______________________________________________________________________

### ä»£ç å®ç°

<div class="code-tabs">
  <input type="radio" name="lang" id="java" checked>
  <label for="java">Java</label>
  <input type="radio" name="lang" id="go">
  <label for="go">Go</label>

<div class="tab-content">
    <pre><code class="language-java">

```
class Solution {
    public int search(int[] nums, int target) {
        int left = 0, right = nums.length - 1;
        while (left <= right) {
            int mid = left + (right - left) / 2;
            
            if (nums[mid] == target) {
                return mid;
            }
            
            // å·¦åŠéƒ¨åˆ†æœ‰åº
            if (nums[left] <= nums[mid]) {
                if (target >= nums[left] && target < nums[mid]) {
                    right = mid - 1;
                } else {
                    left = mid + 1;
                }
            } 
            // å³åŠéƒ¨åˆ†æœ‰åº
            else {
                if (target > nums[mid] && target <= nums[right]) {
                    left = mid + 1;
                } else {
                    right = mid - 1;
                }
            }
        }
        
        return -1;
}
```

</code></pre>

</div>

<div class="tab-content">
    <pre><code class="language-go">

```
func search(nums []int, target int) int {
    left, right := 0, len(nums)-1
    for left <= right {
        mid := left + (right-left)/2
        
        if nums[mid] == target {
            return mid
        }
        
        // å·¦åŠéƒ¨åˆ†æœ‰åº
        if nums[left] <= nums[mid] {
            if target >= nums[left] && target < nums[mid] {
                right = mid - 1
            } else {
                left = mid + 1
            }
        } else {
            // å³åŠéƒ¨åˆ†æœ‰åº
            if target > nums[mid] && target <= nums[right] {
                left = mid + 1
            } else {
                right = mid - 1
            }
        }
    }
    return -1
}
```

</code></pre>

</div>
</div>

<style>
.code-tabs input[type="radio"] {
  display: none;
}
.code-tabs label {
  padding: 8px 16px;
  background: #f0f0f0;
  border: 1px solid #ccc;
  cursor: pointer;
  margin-right: 4px;
}
.code-tabs label:hover {
  background: #e0e0e0;
}
.code-tabs input[type="radio"]:checked + label {
  background: #007acc;
  color: white;
}
.tab-content {
  display: none;
  padding: 16px;
  border: 1px solid #ccc;
  border-top: none;
}
.code-tabs input[type="radio"]:nth-of-type(1):checked ~ .tab-content:nth-of-type(1),
.code-tabs input[type="radio"]:nth-of-type(2):checked ~ .tab-content:nth-of-type(2) {
  display: block;
}
pre { margin: 0; }
</style>

______________________________________________________________________

### ç¤ºä¾‹æ¼”ç¤º

ä»¥ `nums = [4,5,6,7,0,1,2], target = 0` ä¸ºä¾‹ï¼š

| æ­¥éª¤ | left | right | mid | nums[mid] | æœ‰åºéƒ¨åˆ† | target èŒƒå›´åˆ¤æ–­ | æ–°è¾¹ç•Œ |
|------|------|--------|-----|------------|----------|------------------|--------|
| 1 | 0 | 6 | 3 | 7 | å·¦æœ‰åº | 0 âˆ‰ \[4,7) | left=4 |
| 2 | 4 | 6 | 5 | 1 | å³æœ‰åº | 0 âˆˆ (1,2\]? å¦ | right=4|
| 3 | 4 | 4 | 4 | 0 | â€” | æ‰¾åˆ°ï¼ | return 4 |

âœ… æˆåŠŸæ‰¾åˆ°ç›®æ ‡å€¼ã€‚

______________________________________________________________________

### ç­”æ¡ˆæœ‰æ•ˆæ€§è¯æ˜

- **æ­£ç¡®æ€§**ï¼šæ¯æ¬¡è¿­ä»£éƒ½åŸºäºâ€œè‡³å°‘æœ‰ä¸€åŠæ˜¯æœ‰åºçš„â€è¿™ä¸€æ€§è´¨ï¼Œé€šè¿‡åˆ¤æ–­ `target` æ˜¯å¦è½åœ¨æœ‰åºåŒºé—´å†…æ¥å†³å®šæœç´¢æ–¹å‘ï¼Œé€»è¾‘ä¸¥å¯†ã€‚
- **ç»ˆæ­¢æ€§**ï¼šæ¯æ¬¡å¾ªç¯è¦ä¹ˆæ‰¾åˆ°ç›®æ ‡ï¼Œè¦ä¹ˆç¼©å°æœç´¢åŒºé—´ï¼ˆ`left` æˆ– `right` ç§»åŠ¨ï¼‰ï¼Œæœ€ç»ˆ `left > right` é€€å‡ºã€‚
- **è¦†ç›–è¾¹ç•Œ**ï¼šåŒ…æ‹¬å•å…ƒç´ ã€æœªæ—‹è½¬ï¼ˆ`k=0`ï¼‰ã€`target` åœ¨æ—‹è½¬ç‚¹ç­‰è¾¹ç•Œæƒ…å†µå‡èƒ½å¤„ç†ã€‚

______________________________________________________________________

### å¤æ‚åº¦åˆ†æ

| é¡¹ç›® | å¤æ‚åº¦ |
|------|--------|
| âœ… æ—¶é—´å¤æ‚åº¦ | `O(log n)` â€”â€” æ¯æ¬¡æ’é™¤ä¸€åŠå…ƒç´  |
| âœ… ç©ºé—´å¤æ‚åº¦ | `O(1)` â€”â€” ä»…ä½¿ç”¨å¸¸æ•°é¢å¤–ç©ºé—´ |

______________________________________________________________________

### é—®é¢˜æ€»ç»“

ğŸ“Œ **å…³é”®æ”¶è·ï¼š**

- æ—‹è½¬æ’åºæ•°ç»„è™½æ•´ä½“æ— åºï¼Œä½†**å±€éƒ¨æœ‰åº**ï¼Œå¯ç»“åˆäºŒåˆ†æŸ¥æ‰¾ã€‚
- åˆ¤æ–­å“ªä¸€åŠæœ‰åºæ˜¯è§£é¢˜çªç ´å£ã€‚
- æ¡ä»¶åˆ¤æ–­éœ€ä¸¥è°¨ï¼Œæ³¨æ„è¾¹ç•Œï¼ˆå¦‚ `<=` vs `<`ï¼‰ã€‚

ğŸ’¡ **æ‰©å±•æ€è€ƒï¼š**

- è‹¥æ•°ç»„å…è®¸é‡å¤å…ƒç´ ï¼ˆå¦‚ LeetCode 81 é¢˜ï¼‰ï¼Œåˆ™ `nums[left] == nums[mid]` æ—¶æ— æ³•åˆ¤æ–­å“ªè¾¹æœ‰åºï¼Œéœ€ç‰¹æ®Šå¤„ç†ï¼ˆå¦‚ `left++`ï¼‰ã€‚
- æœ¬é¢˜æ˜¯â€œ**åœ¨éƒ¨åˆ†æœ‰åºç»“æ„ä¸­åº”ç”¨äºŒåˆ†æŸ¥æ‰¾**â€çš„ç»å…¸èŒƒä¾‹ï¼Œå¯¹ç†è§£äºŒåˆ†æ€æƒ³çš„çµæ´»æ€§å¾ˆæœ‰å¸®åŠ©ã€‚

âœ… æŒæ¡æ­¤é¢˜ï¼Œå°±æŒæ¡äº†å¤„ç†â€œæ—‹è½¬æ•°ç»„â€ç±»é—®é¢˜çš„æ ¸å¿ƒæŠ€å·§ï¼
