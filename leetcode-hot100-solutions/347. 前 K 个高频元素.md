#  é—®é¢˜ç®€ä»‹

ğŸ”— [LeetCode 347. å‰ K ä¸ªé«˜é¢‘å…ƒç´ ](https://leetcode.cn/problems/top-k-frequent-elements?envType=problem-list-v2&envId=2cktkvj)

## ğŸ“ é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` å’Œä¸€ä¸ªæ•´æ•° `k`ï¼Œè¯·ä½ è¿”å›å…¶ä¸­å‡ºç°é¢‘ç‡å‰ `k` é«˜çš„å…ƒç´ ã€‚ä½ å¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** è¿”å›ç­”æ¡ˆã€‚

______________________________________________________________________

## ğŸ§ª ç¤ºä¾‹è¯´æ˜

### ç¤ºä¾‹ 1ï¼š

```
è¾“å…¥: nums = [1,1,1,2,2,3], k = 2
è¾“å‡º: [1,2]
```

### ç¤ºä¾‹ 2ï¼š

```
è¾“å…¥: nums = [1], k = 1
è¾“å‡º: [1]
```

ğŸ“Œ **æç¤ºï¼š**

- `1 <= nums.length <= 10^5`
- `-10^4 <= nums[i] <= 10^4`
- `k` çš„å–å€¼èŒƒå›´æ˜¯ `[1, æ•°ç»„ä¸­ä¸ç›¸åŒçš„å…ƒç´ çš„ä¸ªæ•°]`
- é¢˜ç›®æ•°æ®ä¿è¯ç­”æ¡ˆå”¯ä¸€ï¼ˆæ¢è¨€ä¹‹ï¼Œæ•°ç»„ä¸­å‰ `k` ä¸ªé«˜é¢‘å…ƒç´ çš„é›†åˆæ˜¯å”¯ä¸€çš„ï¼‰

______________________________________________________________________

# ğŸ’¡ è§£é¢˜æ€è·¯

è¦æ‰¾å‡ºé¢‘ç‡æœ€é«˜çš„å‰ `k` ä¸ªå…ƒç´ ï¼Œæ ¸å¿ƒåœ¨äºï¼š

1. **ç»Ÿè®¡æ¯ä¸ªå…ƒç´ çš„é¢‘ç‡**ï¼›
1. **æ ¹æ®é¢‘ç‡æ’åºæˆ–é€‰æ‹©å‰ k ä¸ªæœ€å¤§é¢‘ç‡çš„å…ƒç´ **ã€‚

ä¸‹é¢ä»‹ç»ä¸‰ç§ä¸»æµè§£æ³•ï¼š

______________________________________________________________________

## âœ… æ–¹æ³•ä¸€ï¼šå“ˆå¸Œè¡¨ + æ’åºï¼ˆæœ€ç›´è§‚ï¼‰

### æ­¥éª¤ï¼š

1. ä½¿ç”¨ `HashMap` ç»Ÿè®¡æ¯ä¸ªæ•°å­—çš„å‡ºç°æ¬¡æ•°ï¼›
1. å°† `Map.Entry` è½¬ä¸ºåˆ—è¡¨ï¼Œå¹¶æŒ‰é¢‘ç‡é™åºæ’åºï¼›
1. å–å‰ `k` ä¸ªå…ƒç´ çš„ keyã€‚

âœ… ç®€å•ç›´æ¥ï¼Œé€‚åˆç†è§£ã€‚

______________________________________________________________________

## âœ… æ–¹æ³•äºŒï¼šå“ˆå¸Œè¡¨ + æœ€å°å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰

### æ­¥éª¤ï¼š

1. åŒæ ·å…ˆç”¨ `HashMap` ç»Ÿè®¡é¢‘ç‡ï¼›
1. ç»´æŠ¤ä¸€ä¸ªå¤§å°ä¸º `k` çš„**æœ€å°å †**ï¼ˆæŒ‰é¢‘ç‡æ¯”è¾ƒï¼‰ï¼›
   - å †ä¸­ä¿å­˜çš„æ˜¯ `(æ•°å­—, é¢‘ç‡)` å¯¹ï¼›
   - å½“å †å¤§å°è¶…è¿‡ `k`ï¼Œå¼¹å‡ºé¢‘ç‡æœ€å°çš„ï¼›
1. æœ€ç»ˆå †ä¸­å‰©ä¸‹çš„å°±æ˜¯å‰ `k` é«˜é¢‘å…ƒç´ ã€‚

ğŸ’¡ ä¼˜åŠ¿ï¼šæ—¶é—´å¤æ‚åº¦ä¼˜äºå…¨æ’åºï¼Œå°¤å…¶å½“ `k << n` æ—¶ã€‚

______________________________________________________________________

## âœ… æ–¹æ³•ä¸‰ï¼šå“ˆå¸Œè¡¨ + æ¡¶æ’åºï¼ˆè®¡æ•°æ’åºæ€æƒ³ï¼‰

### æ­¥éª¤ï¼š

1. ç»Ÿè®¡é¢‘ç‡ï¼ˆåŒä¸Šï¼‰ï¼›
1. åˆ›å»ºä¸€ä¸ªâ€œæ¡¶â€æ•°ç»„ `bucket`ï¼Œç´¢å¼•ä¸ºé¢‘ç‡ï¼Œå€¼ä¸ºè¯¥é¢‘ç‡å¯¹åº”çš„æ•°å­—åˆ—è¡¨ï¼›
   - æœ€å¤§é¢‘ç‡ä¸è¶…è¿‡ `n`ï¼ˆæ•°ç»„é•¿åº¦ï¼‰ï¼Œæ‰€ä»¥æ¡¶å¤§å°ä¸º `n+1`ï¼›
1. ä»é«˜é¢‘ç‡å¾€ä½éå†æ¡¶ï¼Œæ”¶é›†å‰ `k` ä¸ªå…ƒç´ ã€‚

ğŸ“Œ è¿™æ˜¯**çº¿æ€§æ—¶é—´**è§£æ³•ï¼Œé€‚ç”¨äºé¢‘ç‡èŒƒå›´æœ‰é™çš„æƒ…å†µã€‚

______________________________________________________________________

# ğŸ’» ä»£ç å®ç°

<div class="code-tabs">

```java:Java
// æ–¹æ³•ä¸€ï¼šå“ˆå¸Œè¡¨ + æ’åº
class Solution {
    public int[] topKFrequent(int[] nums, int k) {
        Map<Integer, Integer> freq = new HashMap<>();
        for (int num : nums) {
            freq.put(num, freq.getOrDefault(num, 0) + 1);
        }

        List<Map.Entry<Integer, Integer>> list = new ArrayList<>(freq.entrySet());
        list.sort((a, b) -> b.getValue() - a.getValue());

        int[] res = new int[k];
        for (int i = 0; i < k; i++) {
            res[i] = list.get(i).getKey();
        }
        return res;
    }
}

// æ–¹æ³•äºŒï¼šå“ˆå¸Œè¡¨ + æœ€å°å †
class Solution {
    public int[] topKFrequent(int[] nums, int k) {
        Map<Integer, Integer> freq = new HashMap<>();
        for (int num : nums) {
            freq.put(num, freq.getOrDefault(num, 0) + 1);
        }

        PriorityQueue<Map.Entry<Integer, Integer>> pq = new PriorityQueue<>(
            (a, b) -> a.getValue() - b.getValue()
        );

        for (var entry : freq.entrySet()) {
            pq.offer(entry);
            if (pq.size() > k) {
                pq.poll();
            }
        }

        int[] res = new int[k];
        for (int i = k - 1; i >= 0; i--) {
            res[i] = pq.poll().getKey();
        }
        return res;
    }
}

// æ–¹æ³•ä¸‰ï¼šå“ˆå¸Œè¡¨ + æ¡¶æ’åº
class Solution {
    public int[] topKFrequent(int[] nums, int k) {
        Map<Integer, Integer> freq = new HashMap<>();
        for (int num : nums) {
            freq.put(num, freq.getOrDefault(num, 0) + 1);
        }

        // bucket[i] è¡¨ç¤ºé¢‘ç‡ä¸º i çš„æ‰€æœ‰æ•°å­—
        List<Integer>[] bucket = new List[nums.length + 1];
        for (int num : freq.keySet()) {
            int count = freq.get(num);
            if (bucket[count] == null) {
                bucket[count] = new ArrayList<>();
            }
            bucket[count].add(num);
        }

        int[] res = new int[k];
        int idx = 0;
        // ä»é«˜é¢‘ç‡å¾€ä½éå†
        for (int i = nums.length; i >= 0 && idx < k; i--) {
            if (bucket[i] != null) {
                for (int num : bucket[i]) {
                    res[idx++] = num;
                    if (idx == k) break;
                }
            }
        }
        return res;
    }
}
```

```go:Go
// æ–¹æ³•ä¸€ï¼šå“ˆå¸Œè¡¨ + æ’åº
func topKFrequent(nums []int, k int) []int {
    freq := make(map[int]int)
    for _, num := range nums {
        freq[num]++
    }

    type pair struct {
        num, count int
    }
    pairs := make([]pair, 0, len(freq))
    for num, count := range freq {
        pairs = append(pairs, pair{num, count})
    }

    sort.Slice(pairs, func(i, j int) bool {
        return pairs[i].count > pairs[j].count // é™åº
    })

    res := make([]int, k)
    for i := 0; i < k; i++ {
        res[i] = pairs[i].num
    }
    return res
}

// æ–¹æ³•äºŒï¼šå“ˆå¸Œè¡¨ + æœ€å°å †
import "container/heap"

type Item struct {
    num, count int
}

type MinHeap []*Item

func (h MinHeap) Len() int           { return len(h) }
func (h MinHeap) Less(i, j int) bool { return h[i].count < h[j].count }
func (h MinHeap) Swap(i, j int)      { h[i], h[j] = h[j], h[i] }
func (h *MinHeap) Push(x any)        { *h = append(*h, x.(*Item)) }
func (h *MinHeap) Pop() any {
    old := *h
    n := len(old)
    x := old[n-1]
    *h = old[0 : n-1]
    return x
}

func topKFrequent(nums []int, k int) []int {
    freq := make(map[int]int)
    for _, num := range nums {
        freq[num]++
    }

    h := &MinHeap{}
    heap.Init(h)
    for num, count := range freq {
        heap.Push(h, &Item{num, count})
        if h.Len() > k {
            heap.Pop(h)
        }
    }

    res := make([]int, k)
    for i := k - 1; i >= 0; i-- {
        res[i] = heap.Pop(h).(*Item).num
    }
    return res
}

// æ–¹æ³•ä¸‰ï¼šå“ˆå¸Œè¡¨ + æ¡¶æ’åº
func topKFrequent(nums []int, k int) []int {
    freq := make(map[int]int)
    for _, num := range nums {
        freq[num]++
    }

    // bucket[i] å­˜å‚¨é¢‘ç‡ä¸º i çš„æ•°å­—
    bucket := make([][]int, len(nums)+1)
    for num, count := range freq {
        bucket[count] = append(bucket[count], num)
    }

    res := make([]int, 0, k)
    for i := len(nums); i >= 0 && len(res) < k; i-- {
        if bucket[i] != nil {
            for _, num := range bucket[i] {
                res = append(res, num)
                if len(res) == k {
                    break
                }
            }
        }
    }
    return res
}
```

</div>

______________________________________________________________________

# ğŸ¯ ç¤ºä¾‹æ¼”ç¤º

ä»¥ `nums = [1,1,1,2,2,3], k = 2` ä¸ºä¾‹ï¼š

1. **é¢‘ç‡ç»Ÿè®¡**ï¼š`{1:3, 2:2, 3:1}`
1. **æ–¹æ³•ä¸€æ’åºå**ï¼š`[(1,3), (2,2), (3,1)]` â†’ å–å‰2 â†’ `[1,2]`
1. **æ–¹æ³•äºŒæœ€å°å †è¿‡ç¨‹**ï¼š
   - æ’å…¥ (1,3) â†’ å †ï¼š[(1,3)]
   - æ’å…¥ (2,2) â†’ å †ï¼š[(2,2), (1,3)]ï¼ˆå †é¡¶æœ€å°ï¼‰
   - æ’å…¥ (3,1) â†’ å †æ»¡3>k=2 â†’ å¼¹å‡º (3,1) â†’ å †ï¼š[(2,2), (1,3)]
   - å¼¹å‡ºå¾— `[1,2]`ï¼ˆæ³¨æ„é¡ºåºåè½¬ï¼‰
1. **æ–¹æ³•ä¸‰æ¡¶æ’åº**ï¼š
   - `bucket[3] = [1]`, `bucket[2] = [2]`, `bucket[1] = [3]`
   - ä» i=6 åˆ° 0ï¼Œå…ˆå– bucket[3] â†’ [1]ï¼Œå†å– bucket[2] â†’ [1,2]

âœ… ç»“æœä¸€è‡´ã€‚

______________________________________________________________________

# âœ… ç­”æ¡ˆæœ‰æ•ˆæ€§è¯æ˜

- **æ­£ç¡®æ€§**ï¼š
  - æ‰€æœ‰æ–¹æ³•éƒ½åŸºäºå‡†ç¡®çš„é¢‘ç‡ç»Ÿè®¡ï¼›
  - æ’åº/å †/æ¡¶å‡èƒ½æ­£ç¡®é€‰å‡ºé¢‘ç‡æœ€é«˜çš„ `k` ä¸ªå…ƒç´ ï¼›
  - é¢˜ç›®ä¿è¯ç­”æ¡ˆå”¯ä¸€ï¼Œæ— éœ€å¤„ç†é¢‘ç‡ç›¸åŒæ—¶çš„æ­§ä¹‰ã€‚
- **è¾¹ç•Œè¦†ç›–**ï¼š
  - `k = 1`ã€`k = n`ï¼ˆæ‰€æœ‰ä¸åŒå…ƒç´ ï¼‰å‡èƒ½å¤„ç†ï¼›
  - è´Ÿæ•°ã€é‡å¤ã€å•å…ƒç´ ç­‰å‡å·²è¦†ç›–ã€‚

______________________________________________________________________

# ğŸ“Š å¤æ‚åº¦åˆ†æ

| æ–¹æ³• | æ—¶é—´å¤æ‚åº¦ | ç©ºé—´å¤æ‚åº¦ | é€‚ç”¨åœºæ™¯ |
|------|-----------|-----------|--------|
| å“ˆå¸Œ+æ’åº | `O(n log n)` | `O(n)` | ç®€å•ï¼Œé€šç”¨ |
| å“ˆå¸Œ+æœ€å°å † | `O(n log k)` | `O(n + k)` | `k` è¾ƒå°æ—¶é«˜æ•ˆ |
| å“ˆå¸Œ+æ¡¶æ’åº | `O(n)` | `O(n)` | **æœ€ä¼˜**ï¼Œé¢‘ç‡èŒƒå›´æœ‰é™ |

ğŸ“Œ å…¶ä¸­ `n` ä¸ºæ•°ç»„é•¿åº¦ã€‚

______________________________________________________________________

# ğŸ§  é—®é¢˜æ€»ç»“

- **æ ¸å¿ƒæ€æƒ³**ï¼šé¢‘ç‡ç»Ÿè®¡ + Top-K é€‰æ‹©ï¼›
- **Top-K é—®é¢˜ç»å…¸è§£æ³•**ï¼š
  - å…¨æ’åºï¼ˆç®€å•ä½†æ…¢ï¼‰ï¼›
  - å †ï¼ˆå¹³è¡¡æ—¶é—´å’Œç©ºé—´ï¼‰ï¼›
  - æ¡¶æ’åºï¼ˆçº¿æ€§æ—¶é—´ï¼Œæœ€ä¼˜ï¼‰ï¼›
- **å®é™…åº”ç”¨**ï¼šçƒ­æœæ¦œã€æ¨èç³»ç»Ÿã€æ—¥å¿—åˆ†æç­‰ï¼›
- **æ‰©å±•æ€è€ƒ**ï¼š
  - å¦‚æœè¦æ±‚æŒ‰é¢‘ç‡**å‡åº**è¿”å›ï¼Ÿ
  - å¦‚æœå…è®¸é¢‘ç‡ç›¸åŒæŒ‰æ•°å€¼å¤§å°æ’åºï¼Ÿ
  - æµå¼æ•°æ®å¦‚ä½•å¤„ç†ï¼Ÿï¼ˆå¯ç”¨å †åŠ¨æ€ç»´æŠ¤ï¼‰

ğŸ’¡ æŒæ¡è¿™ä¸‰ç§æ–¹æ³•ï¼Œä¸ä»…èƒ½è§£å†³æœ¬é¢˜ï¼Œè¿˜èƒ½åº”å¯¹å„ç±»â€œTop-Kâ€å˜ç§é—®é¢˜ï¼
