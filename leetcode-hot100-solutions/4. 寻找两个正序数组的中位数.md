## é—®é¢˜ç®€ä»‹

[LeetCode 4. å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°](https://leetcode.cn/problems/median-of-two-sorted-arrays?envType=problem-list-v2&envId=2cktkvj)

### é¢˜ç›®æè¿°

ç»™å®šä¸¤ä¸ªå¤§å°åˆ†åˆ«ä¸º `m` å’Œ `n` çš„æ­£åºï¼ˆä»å°åˆ°å¤§ï¼‰æ•°ç»„ `nums1` å’Œ `nums2`ã€‚è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›è¿™ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ **ä¸­ä½æ•°**ã€‚

ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦åº”è¯¥ä¸º `O(log (m+n))`ã€‚

______________________________________________________________________

## ç¤ºä¾‹è¯´æ˜

âœ… **ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums1 = [1,3], nums2 = [2]
è¾“å‡ºï¼š2.00000
è§£é‡Šï¼šåˆå¹¶æ•°ç»„ = [1,2,3] ï¼Œä¸­ä½æ•° 2
```

âœ… **ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums1 = [1,2], nums2 = [3,4]
è¾“å‡ºï¼š2.50000
è§£é‡Šï¼šåˆå¹¶æ•°ç»„ = [1,2,3,4] ï¼Œä¸­ä½æ•° (2 + 3) / 2 = 2.5
```

âœ… **ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šnums1 = [], nums2 = [1]
è¾“å‡ºï¼š1.00000
```

______________________________________________________________________

## è§£é¢˜æ€è·¯

### ğŸ’¡ æ–¹æ³•ä¸€ï¼šæš´åŠ›åˆå¹¶ï¼ˆä¸ç¬¦åˆé¢˜ç›®è¦æ±‚ï¼Œä½†ä½œä¸ºç†è§£åŸºç¡€ï¼‰

1. å°†ä¸¤ä¸ªæ•°ç»„åˆå¹¶æˆä¸€ä¸ªæœ‰åºæ•°ç»„
1. ç›´æ¥è®¡ç®—ä¸­ä½æ•°
1. æ—¶é—´å¤æ‚åº¦ï¼šO(m + n)ï¼Œç©ºé—´å¤æ‚åº¦ï¼šO(m + n)

âŒ **ç¼ºç‚¹**ï¼šä¸æ»¡è¶³ O(log(m+n)) çš„æ—¶é—´å¤æ‚åº¦è¦æ±‚

______________________________________________________________________

### ğŸ’¡ æ–¹æ³•äºŒï¼šäºŒåˆ†æŸ¥æ‰¾ï¼ˆæ¨èè§£æ³•ï¼‰

**æ ¸å¿ƒæ€æƒ³**ï¼šå°†é—®é¢˜è½¬åŒ–ä¸ºå¯»æ‰¾ç¬¬ k å°çš„å…ƒç´ 

#### æ­¥éª¤è¯¦è§£ï¼š

1. **ç»Ÿä¸€å¤„ç†å¥‡å¶æƒ…å†µ**ï¼š

   - å¦‚æœæ€»é•¿åº¦ä¸ºå¥‡æ•°ï¼Œä¸­ä½æ•° = ç¬¬ `(m+n+1)/2` å°çš„æ•°
   - å¦‚æœæ€»é•¿åº¦ä¸ºå¶æ•°ï¼Œä¸­ä½æ•° = (ç¬¬ `(m+n)/2` å°çš„æ•° + ç¬¬ `(m+n)/2+1` å°çš„æ•°) / 2

1. **è®¾è®¡ findKth å‡½æ•°**ï¼š

   - åœ¨ä¸¤ä¸ªæœ‰åºæ•°ç»„ä¸­æ‰¾åˆ°ç¬¬ k å°çš„å…ƒç´ 
   - æ¯æ¬¡æ¯”è¾ƒä¸¤ä¸ªæ•°ç»„çš„ç¬¬ k/2 ä¸ªå…ƒç´ 
   - æ’é™¤è¾ƒå°çš„é‚£ä¸€éƒ¨åˆ†ï¼Œå› ä¸ºå®ƒä»¬ä¸å¯èƒ½åŒ…å«ç¬¬ k å°çš„å…ƒç´ 

1. **è¾¹ç•Œå¤„ç†**ï¼š

   - å½“ä¸€ä¸ªæ•°ç»„ä¸ºç©ºæ—¶ï¼Œç›´æ¥è¿”å›å¦ä¸€ä¸ªæ•°ç»„çš„ç¬¬ k ä¸ªå…ƒç´ 
   - å½“ k = 1 æ—¶ï¼Œè¿”å›ä¸¤ä¸ªæ•°ç»„é¦–å…ƒç´ çš„è¾ƒå°å€¼

1. **é€’å½’/è¿­ä»£å®ç°**ï¼š

   - é€šè¿‡ä¸æ–­ç¼©å°æœç´¢èŒƒå›´ï¼Œæœ€ç»ˆæ‰¾åˆ°ç›®æ ‡å…ƒç´ 

______________________________________________________________________

### ğŸ’¡ æ–¹æ³•ä¸‰ï¼šäºŒåˆ†åˆ†å‰²ç‚¹ï¼ˆæ›´ä¼˜é›…çš„äºŒåˆ†æ³•ï¼‰

**æ ¸å¿ƒæ€æƒ³**ï¼šåœ¨è¾ƒçŸ­çš„æ•°ç»„ä¸Šè¿›è¡ŒäºŒåˆ†ï¼Œæ‰¾åˆ°åˆé€‚çš„åˆ†å‰²ç‚¹

1. ç¡®ä¿ nums1 æ˜¯è¾ƒçŸ­çš„æ•°ç»„ï¼ˆå¦‚æœä¸æ˜¯åˆ™äº¤æ¢ï¼‰
1. åœ¨ nums1 ä¸Šè¿›è¡ŒäºŒåˆ†æœç´¢ï¼Œå¯»æ‰¾åˆ†å‰²ç‚¹ i
1. å¯¹åº”çš„ nums2 åˆ†å‰²ç‚¹ä¸º j = (m + n + 1) / 2 - i
1. æ£€æŸ¥åˆ†å‰²æ˜¯å¦æœ‰æ•ˆï¼š`nums1[i-1] <= nums2[j] && nums2[j-1] <= nums1[i]`
1. æ ¹æ®å¥‡å¶æ€§è®¡ç®—ä¸­ä½æ•°

______________________________________________________________________

## ä»£ç å®ç°

```java
// Java å®ç° - æ–¹æ³•äºŒï¼šäºŒåˆ†æŸ¥æ‰¾ç¬¬kå°å…ƒç´ 
class Solution {
    public double findMedianSortedArrays(int[] nums1, int[] nums2) {
        int m = nums1.length, n = nums2.length;
        int total = m + n;
        
        if (total % 2 == 1) {
            return findKth(nums1, 0, nums2, 0, total / 2 + 1);
        } else {
            return (findKth(nums1, 0, nums2, 0, total / 2) + 
                    findKth(nums1, 0, nums2, 0, total / 2 + 1)) / 2.0;
        }
    }
    
    private int findKth(int[] nums1, int start1, int[] nums2, int start2, int k) {
        // ç¡®ä¿ nums1 å‰©ä½™é•¿åº¦ <= nums2 å‰©ä½™é•¿åº¦
        if (nums1.length - start1 > nums2.length - start2) {
            return findKth(nums2, start2, nums1, start1, k);
        }
        
        // è¾¹ç•Œæƒ…å†µï¼šnums1 å·²ç»éå†å®Œ
        if (start1 >= nums1.length) {
            return nums2[start2 + k - 1];
        }
        
        // è¾¹ç•Œæƒ…å†µï¼šk = 1
        if (k == 1) {
            return Math.min(nums1[start1], nums2[start2]);
        }
        
        // è®¡ç®—æ¯”è¾ƒä½ç½®
        int mid1 = Math.min(start1 + k / 2 - 1, nums1.length - 1);
        int mid2 = start2 + k / 2 - 1;
        
        if (nums1[mid1] <= nums2[mid2]) {
            // æ’é™¤ nums1 çš„å‰åŠéƒ¨åˆ†
            return findKth(nums1, mid1 + 1, nums2, start2, k - (mid1 - start1 + 1));
        } else {
            // æ’é™¤ nums2 çš„å‰åŠéƒ¨åˆ†
            return findKth(nums1, start1, nums2, mid2 + 1, k - k / 2);
        }
    }
}

// Java å®ç° - æ–¹æ³•ä¸‰ï¼šäºŒåˆ†åˆ†å‰²ç‚¹
class Solution2 {
    public double findMedianSortedArrays(int[] nums1, int[] nums2) {
        if (nums1.length > nums2.length) {
            return findMedianSortedArrays(nums2, nums1);
        }
        
        int m = nums1.length, n = nums2.length;
        int left = 0, right = m;
        int median1 = 0, median2 = 0;
        
        while (left <= right) {
            int i = (left + right) / 2;
            int j = (m + n + 1) / 2 - i;
            
            int nums1LeftMax = (i == 0) ? Integer.MIN_VALUE : nums1[i - 1];
            int nums1RightMin = (i == m) ? Integer.MAX_VALUE : nums1[i];
            int nums2LeftMax = (j == 0) ? Integer.MIN_VALUE : nums2[j - 1];
            int nums2RightMin = (j == n) ? Integer.MAX_VALUE : nums2[j];
            
            if (nums1LeftMax <= nums2RightMin) {
                median1 = Math.max(nums1LeftMax, nums2LeftMax);
                median2 = Math.min(nums1RightMin, nums2RightMin);
                left = i + 1;
            } else {
                right = i - 1;
            }
        }
        
        return (m + n) % 2 == 0 ? (median1 + median2) / 2.0 : median1;
    }
}
````

```go
// Go å®ç° - æ–¹æ³•äºŒï¼šäºŒåˆ†æŸ¥æ‰¾ç¬¬kå°å…ƒç´ 
func findMedianSortedArrays(nums1 []int, nums2 []int) float64 {
    m, n := len(nums1), len(nums2)
    total := m + n
    
    if total%2 == 1 {
        return float64(findKth(nums1, 0, nums2, 0, total/2+1))
    } else {
        return float64(findKth(nums1, 0, nums2, 0, total/2)+findKth(nums1, 0, nums2, 0, total/2+1)) / 2.0
    }
}

func findKth(nums1 []int, start1 int, nums2 []int, start2 int, k int) int {
    // ç¡®ä¿ nums1 å‰©ä½™é•¿åº¦ <= nums2 å‰©ä½™é•¿åº¦
    if len(nums1)-start1 > len(nums2)-start2 {
        return findKth(nums2, start2, nums1, start1, k)
    }
    
    // è¾¹ç•Œæƒ…å†µï¼šnums1 å·²ç»éå†å®Œ
    if start1 >= len(nums1) {
        return nums2[start2+k-1]
    }
    
    // è¾¹ç•Œæƒ…å†µï¼šk = 1
    if k == 1 {
        return min(nums1[start1], nums2[start2])
    }
    
    // è®¡ç®—æ¯”è¾ƒä½ç½®
    mid1 := min(start1+k/2-1, len(nums1)-1)
    mid2 := start2 + k/2 - 1
    
    if nums1[mid1] <= nums2[mid2] {
        // æ’é™¤ nums1 çš„å‰åŠéƒ¨åˆ†
        return findKth(nums1, mid1+1, nums2, start2, k-(mid1-start1+1))
    } else {
        // æ’é™¤ nums2 çš„å‰åŠéƒ¨åˆ†
        return findKth(nums1, start1, nums2, mid2+1, k-k/2)
    }
}

func min(a, b int) int {
    if a < b {
        return a
    }
    return b
}

// Go å®ç° - æ–¹æ³•ä¸‰ï¼šäºŒåˆ†åˆ†å‰²ç‚¹
func findMedianSortedArrays2(nums1 []int, nums2 []int) float64 {
    if len(nums1) > len(nums2) {
        return findMedianSortedArrays2(nums2, nums1)
    }
    
    m, n := len(nums1), len(nums2)
    left, right := 0, m
    var median1, median2 int
    
    for left <= right {
        i := (left + right) / 2
        j := (m + n + 1) / 2 - i
        
        nums1LeftMax := math.MinInt32
        if i > 0 {
            nums1LeftMax = nums1[i-1]
        }
        nums1RightMin := math.MaxInt32
        if i < m {
            nums1RightMin = nums1[i]
        }
        
        nums2LeftMax := math.MinInt32
        if j > 0 {
            nums2LeftMax = nums2[j-1]
        }
        nums2RightMin := math.MaxInt32
        if j < n {
            nums2RightMin = nums2[j]
        }
        
        if nums1LeftMax <= nums2RightMin {
            median1 = max(nums1LeftMax, nums2LeftMax)
            median2 = min(nums1RightMin, nums2RightMin)
            left = i + 1
        } else {
            right = i - 1
        }
    }
    
    if (m+n)%2 == 0 {
        return float64(median1+median2) / 2.0
    }
    return float64(median1)
}

func max(a, b int) int {
    if a > b {
        return a
    }
    return b
}
```

---

## ç¤ºä¾‹æ¼”ç¤º

ğŸ“Œ **ä»¥ç¤ºä¾‹1ä¸ºä¾‹ï¼šnums1 = [1,3], nums2 = [2]**

**æ–¹æ³•äºŒæ‰§è¡Œè¿‡ç¨‹ï¼š**
1. æ€»é•¿åº¦ = 3ï¼ˆå¥‡æ•°ï¼‰ï¼Œéœ€è¦æ‰¾ç¬¬ 2 å°çš„å…ƒç´ 
2. è°ƒç”¨ findKth([1,3], 0, [2], 0, 2)
3. æ¯”è¾ƒ nums1[0] = 1 å’Œ nums2[0] = 2
4. 1 < 2ï¼Œæ’é™¤ nums1[0]ï¼Œåœ¨ [3] å’Œ [2] ä¸­æ‰¾ç¬¬ 1 å°çš„å…ƒç´ 
5. è¿”å› min(3, 2) = 2

**æ–¹æ³•ä¸‰æ‰§è¡Œè¿‡ç¨‹ï¼š**
1. nums1 è¾ƒçŸ­ï¼Œåœ¨ nums1 ä¸ŠäºŒåˆ†
2. i = 1, j = (2+1+1)/2 - 1 = 1
3. æ£€æŸ¥åˆ†å‰²ï¼šnums1[0] = 1 <= nums2[1] = âˆ âœ“ï¼Œnums2[0] = 2 <= nums1[1] = 3 âœ“
4. å·¦ä¾§æœ€å¤§å€¼ = max(1, 2) = 2ï¼Œè¿”å› 2

---

## ç­”æ¡ˆæœ‰æ•ˆæ€§è¯æ˜

âœ… **æ­£ç¡®æ€§ä¿è¯ï¼š**

1. **æ–¹æ³•äºŒ**ï¼š
   - æ¯æ¬¡é€’å½’éƒ½èƒ½æ­£ç¡®æ’é™¤ k/2 ä¸ªä¸å¯èƒ½çš„å…ƒç´ 
   - è¾¹ç•Œæ¡ä»¶å¤„ç†å®Œæ•´
   - æœ€ç»ˆå¿…ç„¶èƒ½æ‰¾åˆ°ç¬¬ k å°çš„å…ƒç´ 

2. **æ–¹æ³•ä¸‰**ï¼š
   - é€šè¿‡äºŒåˆ†ç¡®ä¿æ‰¾åˆ°æ­£ç¡®çš„åˆ†å‰²ç‚¹
   - åˆ†å‰²åå·¦ä¾§å…ƒç´ æ•°é‡ = å³ä¾§å…ƒç´ æ•°é‡ï¼ˆæˆ–å·¦ä¾§å¤š1ï¼‰
   - ä¸­ä½æ•°ç”±åˆ†å‰²ç‚¹é™„è¿‘çš„å››ä¸ªå€¼å†³å®š

âœ… **æ•°å­¦å½’çº³æ³•éªŒè¯**ï¼š
- åŸºç¡€æƒ…å†µï¼šå½“ä¸€ä¸ªæ•°ç»„ä¸ºç©ºæ—¶ï¼Œç»“æœæ˜¾ç„¶æ­£ç¡®
- å½’çº³æ­¥éª¤ï¼šæ¯æ¬¡é€’å½’/è¿­ä»£éƒ½ä¿æŒé—®é¢˜è§„æ¨¡å‡å°ï¼Œä¸”ä¸ä¸¢å¤±æ­£ç¡®ç­”æ¡ˆ

---

## å¤æ‚åº¦åˆ†æ

| æ–¹æ³• | æ—¶é—´å¤æ‚åº¦ | ç©ºé—´å¤æ‚åº¦ | æ˜¯å¦æ»¡è¶³è¦æ±‚ |
|------|------------|------------|--------------|
| æš´åŠ›åˆå¹¶ | O(m + n) | O(m + n) | âŒ |
| äºŒåˆ†æŸ¥æ‰¾ç¬¬kå° | O(log(m + n)) | O(log(m + n)) | âœ… |
| äºŒåˆ†åˆ†å‰²ç‚¹ | O(log(min(m, n))) | O(1) | âœ… |

ğŸ’¡ **æœ€ä¼˜è§£**ï¼šæ–¹æ³•ä¸‰çš„æ—¶é—´å¤æ‚åº¦æ›´ä¼˜ï¼Œä¸º O(log(min(m, n)))

---

## é—®é¢˜æ€»ç»“

ğŸ“Œ **å…³é”®æ´å¯Ÿ**ï¼š
- ä¸­ä½æ•°é—®é¢˜å¯ä»¥è½¬åŒ–ä¸ºå¯»æ‰¾ç¬¬ k å°å…ƒç´ çš„é—®é¢˜
- åˆ©ç”¨æ•°ç»„æœ‰åºçš„ç‰¹æ€§ï¼Œå¯ä»¥é€šè¿‡äºŒåˆ†æ³•é«˜æ•ˆæ’é™¤ä¸å¯èƒ½çš„åŒºåŸŸ
- é€‰æ‹©åœ¨è¾ƒçŸ­æ•°ç»„ä¸Šè¿›è¡ŒäºŒåˆ†å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–æ—¶é—´å¤æ‚åº¦

ğŸ“Œ **æŠ€å·§è¦ç‚¹**ï¼š
1. **è¾¹ç•Œå¤„ç†**ï¼šç©ºæ•°ç»„ã€k=1 ç­‰ç‰¹æ®Šæƒ…å†µ
2. **ç´¢å¼•è®¡ç®—**ï¼šé¿å…æ•°ç»„è¶Šç•Œï¼Œä½¿ç”¨ min/max ä¿æŠ¤
3. **å¥‡å¶ç»Ÿä¸€**ï¼šé€šè¿‡ (m+n+1)/2 å’Œ (m+n+2)/2 ç»Ÿä¸€å¤„ç†

ğŸ“Œ **é¢è¯•å»ºè®®**ï¼š
- å…ˆç»™å‡ºæš´åŠ›è§£æ³•å±•ç¤ºæ€è·¯
- å†ä¼˜åŒ–åˆ° O(log(m+n)) çš„äºŒåˆ†è§£æ³•
- é‡ç‚¹è§£é‡Šä¸ºä»€ä¹ˆæ¯æ¬¡å¯ä»¥æ’é™¤ k/2 ä¸ªå…ƒç´ 
- å¼ºè°ƒè¾¹ç•Œæ¡ä»¶çš„å¤„ç†é€»è¾‘
