### é—®é¢˜ç®€ä»‹

ğŸ”— [LeetCode 416. åˆ†å‰²ç­‰å’Œå­é›†](https://leetcode.cn/problems/partition-equal-subset-sum?envType=problem-list-v2&envId=2cktkvj)

#### é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ª **åªåŒ…å«æ­£æ•´æ•°** çš„ **éç©º** æ•°ç»„ `nums`ã€‚è¯·ä½ åˆ¤æ–­æ˜¯å¦å¯ä»¥å°†è¿™ä¸ªæ•°ç»„åˆ†å‰²æˆä¸¤ä¸ªå­é›†ï¼Œä½¿å¾—ä¸¤ä¸ªå­é›†çš„å…ƒç´ å’Œç›¸ç­‰ã€‚

______________________________________________________________________

### ç¤ºä¾‹è¯´æ˜

âœ… **ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [1,5,11,5]
è¾“å‡ºï¼štrue
è§£é‡Šï¼šæ•°ç»„å¯ä»¥åˆ†å‰²æˆ [1, 5, 5] å’Œ [11]ã€‚
```

âœ… **ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [1,2,3,5]
è¾“å‡ºï¼šfalse
è§£é‡Šï¼šæ•°ç»„ä¸èƒ½åˆ†å‰²æˆä¸¤ä¸ªå…ƒç´ å’Œç›¸ç­‰çš„å­é›†ã€‚
```

______________________________________________________________________

### è§£é¢˜æ€è·¯

ğŸ“Œ **æ ¸å¿ƒè§‚å¯Ÿï¼š**

- è‹¥èƒ½å°†æ•°ç»„åˆ’åˆ†ä¸ºä¸¤ä¸ªå’Œç›¸ç­‰çš„å­é›†ï¼Œåˆ™æ€»å’Œ `sum` å¿…é¡»ä¸ºå¶æ•°ï¼›
- ç›®æ ‡è½¬åŒ–ä¸ºï¼š**èƒ½å¦ä»æ•°ç»„ä¸­é€‰å‡ºè‹¥å¹²å…ƒç´ ï¼Œä½¿å…¶å’Œä¸º `sum / 2`**ï¼›
- è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„ **0-1 èƒŒåŒ…é—®é¢˜**ã€‚

______________________________________________________________________

#### âœ… æ–¹æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’ï¼ˆäºŒç»´ DPï¼‰

**çŠ¶æ€å®šä¹‰ï¼š**\
`dp[i][j]` è¡¨ç¤ºè€ƒè™‘å‰ `i` ä¸ªæ•°å­—æ—¶ï¼Œæ˜¯å¦èƒ½å‡‘å‡ºå’Œä¸º `j`ã€‚

**çŠ¶æ€è½¬ç§»ï¼š**

- ä¸é€‰ç¬¬ `i` ä¸ªæ•°ï¼š`dp[i][j] = dp[i - 1][j]`
- é€‰ç¬¬ `i` ä¸ªæ•°ï¼ˆå‰ææ˜¯ `j >= nums[i - 1]`ï¼‰ï¼š`dp[i][j] = dp[i - 1][j - nums[i - 1]]`

**åˆå§‹æ¡ä»¶ï¼š**

- `dp[0][0] = true`ï¼ˆ0 ä¸ªæ•°å‡‘å‡º 0ï¼‰
- `dp[0][j] = false`ï¼ˆj > 0ï¼‰

**ç›®æ ‡ï¼š** `dp[n][target]`ï¼Œå…¶ä¸­ `target = sum / 2`

______________________________________________________________________

#### âœ… æ–¹æ³•äºŒï¼šåŠ¨æ€è§„åˆ’ï¼ˆä¸€ç»´ DPï¼Œç©ºé—´ä¼˜åŒ–ï¼‰

åˆ©ç”¨æ»šåŠ¨æ•°ç»„æ€æƒ³ï¼Œä»åå¾€å‰æ›´æ–° `dp[j]`ï¼Œé¿å…è¦†ç›–æœªæ›´æ–°çš„çŠ¶æ€ã€‚

**çŠ¶æ€å®šä¹‰ï¼š**\
`dp[j]` è¡¨ç¤ºæ˜¯å¦èƒ½å‡‘å‡ºå’Œä¸º `j`ã€‚

**çŠ¶æ€è½¬ç§»ï¼š**

```text
for i in nums:
    for j from target down to i:
        dp[j] = dp[j] || dp[j - i]
```

**åˆå§‹æ¡ä»¶ï¼š** `dp[0] = true`

______________________________________________________________________

#### âŒ å…¶ä»–æ–¹æ³•ï¼ˆä¸æ¨èï¼‰

- **æš´åŠ›å›æº¯**ï¼šæ—¶é—´å¤æ‚åº¦ $O(2^n)$ï¼Œä¼šè¶…æ—¶ï¼›
- **è®°å¿†åŒ–æœç´¢**ï¼šå¯å®ç°ä½†ä¸å¦‚ DP ç®€æ´é«˜æ•ˆã€‚

______________________________________________________________________

### ä»£ç å®ç°

<div class="code-tabs">

```java:Java
class Solution {
    public boolean canPartition(int[] nums) {
        int sum = 0;
        for (int num : nums) sum += num;
        if (sum % 2 != 0) return false;
        
        int target = sum / 2;
        int n = nums.length;
        boolean[][] dp = new boolean[n + 1][target + 1];
        
        // åˆå§‹åŒ–
        dp[0][0] = true;
        for (int i = 1; i <= n; i++) {
            for (int j = 0; j <= target; j++) {
                dp[i][j] = dp[i - 1][j]; // ä¸é€‰
                if (j >= nums[i - 1]) {
                    dp[i][j] = dp[i][j] || dp[i - 1][j - nums[i - 1]]; // é€‰
                }
            }
        }
        return dp[n][target];
    }
}

// ä¸€ç»´ä¼˜åŒ–ç‰ˆ
class SolutionOptimized {
    public boolean canPartition(int[] nums) {
        int sum = 0;
        for (int num : nums) sum += num;
        if (sum % 2 != 0) return false;
        
        int target = sum / 2;
        boolean[] dp = new boolean[target + 1];
        dp[0] = true;
        
        for (int num : nums) {
            for (int j = target; j >= num; j--) {
                dp[j] = dp[j] || dp[j - num];
            }
        }
        return dp[target];
    }
}
```

```go:Go
func canPartition(nums []int) bool {
    sum := 0
    for _, num := range nums {
        sum += num
    }
    if sum%2 != 0 {
        return false
    }
    target := sum / 2
    n := len(nums)
    
    // äºŒç»´ DP
    dp := make([][]bool, n+1)
    for i := range dp {
        dp[i] = make([]bool, target+1)
    }
    dp[0][0] = true
    
    for i := 1; i <= n; i++ {
        for j := 0; j <= target; j++ {
            dp[i][j] = dp[i-1][j]
            if j >= nums[i-1] {
                dp[i][j] = dp[i][j] || dp[i-1][j-nums[i-1]]
            }
        }
    }
    return dp[n][target]
}

// ä¸€ç»´ä¼˜åŒ–ç‰ˆ
func canPartitionOptimized(nums []int) bool {
    sum := 0
    for _, num := range nums {
        sum += num
    }
    if sum%2 != 0 {
        return false
    }
    target := sum / 2
    dp := make([]bool, target+1)
    dp[0] = true
    
    for _, num := range nums {
        for j := target; j >= num; j-- {
            dp[j] = dp[j] || dp[j-num]
        }
    }
    return dp[target]
}
```

</div>

______________________________________________________________________

### ç¤ºä¾‹æ¼”ç¤º

ä»¥ `nums = [1,5,11,5]` ä¸ºä¾‹ï¼š

- `sum = 22` â†’ `target = 11`
- DP è¿‡ç¨‹ï¼ˆä¸€ç»´ï¼‰ï¼š
  - åˆå§‹ï¼š`dp = [T, F, F, ..., F]`ï¼ˆé•¿åº¦ 12ï¼‰
  - å¤„ç† `1`ï¼š`dp[1] = T`
  - å¤„ç† `5`ï¼š`dp[6]=T, dp[5]=T`
  - å¤„ç† `11`ï¼š`dp[11]=T`ï¼ˆå› ä¸º `dp[0]=T`ï¼‰
  - æ­¤æ—¶å·²æ»¡è¶³ï¼Œæœ€ç»ˆè¿”å› `true`

______________________________________________________________________

### ç­”æ¡ˆæœ‰æ•ˆæ€§è¯æ˜

âœ… **æ­£ç¡®æ€§ï¼š**

- è‹¥å­˜åœ¨å­é›†å’Œä¸º `target`ï¼Œåˆ™å‰©ä½™å…ƒç´ å’Œä¹Ÿä¸º `target`ï¼Œæ»¡è¶³é¢˜æ„ï¼›
- DP çŠ¶æ€è½¬ç§»è¦†ç›–äº†æ‰€æœ‰å¯èƒ½çš„å­é›†ç»„åˆï¼›
- åˆå§‹æ¡ä»¶ä¸è¾¹ç•Œå¤„ç†æ­£ç¡®ã€‚

âœ… **å®Œå¤‡æ€§ï¼š**

- æ‰€æœ‰å…ƒç´ ä»…ä½¿ç”¨ä¸€æ¬¡ï¼ˆ0-1 èƒŒåŒ…ç‰¹æ€§ï¼‰ï¼›
- éå†é¡ºåºç¡®ä¿æ— é‡å¤è®¡ç®—ã€‚

______________________________________________________________________

### å¤æ‚åº¦åˆ†æ

| æ–¹æ³• | æ—¶é—´å¤æ‚åº¦ | ç©ºé—´å¤æ‚åº¦ |
|------|------------|------------|
| äºŒç»´ DP | $O(n \\times \\text{target})$ | $O(n \\times \\text{target})$ |
| ä¸€ç»´ DP | $O(n \\times \\text{target})$ | $O(\\text{target})$ |

> ğŸ’¡ å…¶ä¸­ `n = nums.length`ï¼Œ`target = sum / 2`ã€‚ç”±äº `sum` æœ€å¤§ä¸º `200 * 100 = 20000`ï¼ˆé¢˜ç›®çº¦æŸï¼‰ï¼Œå› æ­¤ `target â‰¤ 10000`ï¼ŒDP å¯è¡Œã€‚

______________________________________________________________________

### é—®é¢˜æ€»ç»“

- ğŸ”‘ **æœ¬è´¨**ï¼š0-1 èƒŒåŒ…å¯è¡Œæ€§é—®é¢˜ï¼›
- ğŸ“Œ **å…³é”®è½¬åŒ–**ï¼šæ€»å’Œä¸ºå¶æ•° â†’ å¯»æ‰¾å­é›†å’Œä¸º `sum/2`ï¼›
- âœ… **æœ€ä¼˜è§£æ³•**ï¼šä¸€ç»´åŠ¨æ€è§„åˆ’ï¼Œç©ºé—´æ•ˆç‡é«˜ï¼›
- âš ï¸ **æ³¨æ„è¾¹ç•Œ**ï¼šæ€»å’Œä¸ºå¥‡æ•°ç›´æ¥è¿”å› `false`ï¼›
- ğŸ’¡ **æ‰©å±•æ€è€ƒ**ï¼šè‹¥å…è®¸è´Ÿæ•°ï¼Ÿåˆ™éœ€å…¶ä»–æ–¹æ³•ï¼ˆå¦‚ DFS + å‰ªæï¼‰ã€‚
