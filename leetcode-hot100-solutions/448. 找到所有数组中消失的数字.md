# 448. æ‰¾åˆ°æ‰€æœ‰æ•°ç»„ä¸­æ¶ˆå¤±çš„æ•°å­—

[LeetCode é¢˜ç›®é“¾æ¥](https://leetcode.cn/problems/find-all-numbers-disappeared-in-an-array?envType=problem-list-v2&envId=2cktkvj)

## é—®é¢˜ç®€ä»‹

ç»™ä½ ä¸€ä¸ªå« `n` ä¸ªæ•´æ•°çš„æ•°ç»„ `nums`ï¼Œå…¶ä¸­ `nums[i]` åœ¨åŒºé—´ `[1, n]` å†…ã€‚è¯·ä½ æ‰¾å‡ºæ‰€æœ‰åœ¨ `[1, n]` èŒƒå›´å†…ä½†æ²¡æœ‰å‡ºç°åœ¨ `nums` ä¸­çš„æ•°å­—ï¼Œå¹¶ä»¥æ•°ç»„çš„å½¢å¼è¿”å›ç»“æœã€‚

### é¢˜ç›®æè¿°

- æ•°ç»„é•¿åº¦ä¸º `n`
- æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½åœ¨ `[1, n]` èŒƒå›´å†…ï¼ˆåŒ…æ‹¬ 1 å’Œ nï¼‰
- å¯èƒ½æœ‰é‡å¤å…ƒç´ 
- è¦æ±‚ä¸ä½¿ç”¨é¢å¤–ç©ºé—´ï¼ˆé™¤äº†è¾“å‡ºæ•°ç»„ï¼‰ä¸”æ—¶é—´å¤æ‚åº¦ä¸º O(n)

______________________________________________________________________

## ğŸ“Œ ç¤ºä¾‹è¯´æ˜

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [4,3,2,7,8,2,3,1]
è¾“å‡ºï¼š[5,6]
```

**è§£é‡Šï¼š**\
æ•°ç»„é•¿åº¦ä¸º 8ï¼Œæ‰€ä»¥åº”åŒ…å«æ•°å­— 1 åˆ° 8ã€‚\
ç¼ºå¤±çš„æ˜¯ 5 å’Œ 6ã€‚

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [1,1]
è¾“å‡ºï¼š[2]
```

______________________________________________________________________

## ğŸ’¡ è§£é¢˜æ€è·¯

### æ–¹æ³•ä¸€ï¼šåˆ©ç”¨é›†åˆï¼ˆSetï¼‰â€”â€” ç®€å•ç›´è§‚ä½†ä¸ç¬¦åˆç©ºé—´è¦æ±‚

1. å°†æ•°ç»„ä¸­æ‰€æœ‰å…ƒç´ å­˜å…¥ Setã€‚
1. éå† 1 åˆ° nï¼Œæ£€æŸ¥å“ªäº›æ•°å­—ä¸åœ¨ Set ä¸­ã€‚
1. æ”¶é›†è¿™äº›æ•°å­—ä½œä¸ºç»“æœã€‚

> âœ… ä¼˜ç‚¹ï¼šé€»è¾‘æ¸…æ™°\
> âŒ ç¼ºç‚¹ï¼šä½¿ç”¨äº† O(n) é¢å¤–ç©ºé—´ï¼Œä¸ç¬¦åˆé¢˜ç›®â€œä¸ä½¿ç”¨é¢å¤–ç©ºé—´â€çš„è¿›é˜¶è¦æ±‚

______________________________________________________________________

### æ–¹æ³•äºŒï¼šåŸåœ°æ ‡è®°æ³•ï¼ˆæ¨èï¼‰âœ…

**æ ¸å¿ƒæ€æƒ³ï¼š** åˆ©ç”¨æ•°ç»„æœ¬èº«ä½œä¸ºå“ˆå¸Œè¡¨ã€‚

ç”±äºæ•°ç»„ä¸­æ‰€æœ‰æ•°å­—éƒ½åœ¨ `[1, n]` èŒƒå›´å†…ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ¯ä¸ªæ•°å­— `x` æ˜ å°„åˆ°ç´¢å¼• `x - 1` ä¸Šã€‚

**æ­¥éª¤ï¼š**

1. éå†æ•°ç»„ï¼Œå¯¹æ¯ä¸ªå…ƒç´  `num`ï¼š
   - å–å…¶ç»å¯¹å€¼ `abs(num)`
   - å°†å¯¹åº”ç´¢å¼• `abs(num) - 1` å¤„çš„æ•°å­—å˜ä¸ºè´Ÿæ•°ï¼ˆè¡¨ç¤ºè¯¥ä½ç½®å¯¹åº”çš„æ•°å­—å·²å‡ºç°ï¼‰
1. å†æ¬¡éå†æ•°ç»„ï¼Œè‹¥æŸä½ç½® `i` ä¸Šçš„æ•°ä»ä¸ºæ­£æ•°ï¼Œè¯´æ˜æ•°å­— `i + 1` æ²¡æœ‰å‡ºç°ã€‚
1. æ”¶é›†æ‰€æœ‰ `i + 1` ä½œä¸ºç»“æœã€‚

> âœ… ä¼˜ç‚¹ï¼šO(1) é¢å¤–ç©ºé—´ï¼ˆé™¤è¾“å‡ºï¼‰ï¼ŒO(n) æ—¶é—´\
> âœ… ç¬¦åˆé¢˜ç›®è¿›é˜¶è¦æ±‚

______________________________________________________________________

### æ–¹æ³•ä¸‰ï¼šç´¢å¼•äº¤æ¢æ³•ï¼ˆåŸåœ°é‡æ’ï¼‰

1. éå†æ•°ç»„ï¼Œå°è¯•å°†æ¯ä¸ªæ•°å­—æ”¾åˆ°å…¶â€œæ­£ç¡®ä½ç½®â€ï¼ˆå³ `nums[i]` åº”æ”¾åœ¨ `nums[nums[i]-1]`ï¼‰ã€‚
1. é€šè¿‡ä¸æ–­äº¤æ¢ï¼Œä½¿å¾— `nums[i] == i + 1` æˆ–æ— æ³•å†äº¤æ¢ï¼ˆå¦‚é‡åˆ°é‡å¤ï¼‰ã€‚
1. æœ€åéå†ï¼Œè‹¥ `nums[i] != i + 1`ï¼Œåˆ™ `i + 1` ç¼ºå¤±ã€‚

> âœ… ä¹Ÿæ˜¯ O(1) ç©ºé—´ï¼Œä½†å®ç°ç¨å¤æ‚ï¼Œä¸”æœ€åæƒ…å†µå¯èƒ½å¤šæ¬¡äº¤æ¢

______________________________________________________________________

## ğŸ’» ä»£ç å®ç°

```java
class Solution {
    public List<Integer> findDisappearedNumbers(int[] nums) {
        // åŸåœ°æ ‡è®°æ³•
        for (int num : nums) {
            int index = Math.abs(num) - 1;
            if (nums[index] > 0) {
                nums[index] = -nums[index];
            }
        }

        List<Integer> result = new ArrayList<>();
        for (int i = 0; i < nums.length; i++) {
            if (nums[i] > 0) {
                result.add(i + 1);
            }
        }
        return result;
    }
}
```

```go
func findDisappearedNumbers(nums []int) []int {
    // åŸåœ°æ ‡è®°æ³•
    for _, num := range nums {
        index := abs(num) - 1
        if nums[index] > 0 {
            nums[index] = -nums[index]
        }
    }

    var result []int
    for i, val := range nums {
        if val > 0 {
            result = append(result, i+1)
        }
    }
    return result
}

func abs(x int) int {
    if x < 0 {
        return -x
    }
    return x
}
```

______________________________________________________________________

## ğŸ§ª ç¤ºä¾‹æ¼”ç¤º

ä»¥ `nums = [4,3,2,7,8,2,3,1]` ä¸ºä¾‹ï¼š

**ç¬¬ä¸€æ­¥ï¼šæ ‡è®°**

| åŸæ•°ç»„ | æ“ä½œ | æ ‡è®°å |
|--------|------|--------|
| [4,3,2,7,8,2,3,1] | å¤„ç† 4 â†’ æ ‡è®°ç´¢å¼• 3 â†’ 7 å˜ -7 | [4,3,2,-7,8,2,3,1] |
| ... | ç»§ç»­å¤„ç† | ... |
| æœ€ç»ˆ | æ‰€æœ‰å‡ºç°çš„æ•°å­—å¯¹åº”ä½ç½®å˜è´Ÿ | [-4,-3,-2,-7,8,2,-3,-1] |

**ç¬¬äºŒæ­¥ï¼šæ‰¾æ­£æ•°**

- ç´¢å¼• 4ï¼ˆå€¼ 8 > 0ï¼‰â†’ ç¼ºå¤± 5
- ç´¢å¼• 5ï¼ˆå€¼ 2 > 0ï¼‰â†’ ç¼ºå¤± 6

âœ… è¾“å‡ºï¼š[5, 6]

______________________________________________________________________

## âœ… ç­”æ¡ˆæœ‰æ•ˆæ€§è¯æ˜

**æ­£ç¡®æ€§ï¼š**

- æ¯ä¸ªæ•°å­— `x âˆˆ [1, n]` å¯¹åº”å”¯ä¸€ç´¢å¼• `x - 1`
- è‹¥ `x` å‡ºç°ï¼Œåˆ™ `nums[x-1]` ä¼šè¢«æ ‡è®°ä¸ºè´Ÿ
- è‹¥ `x` æœªå‡ºç°ï¼Œåˆ™ `nums[x-1]` å§‹ç»ˆä¸ºæ­£ï¼ˆå› ä¸ºæ²¡äººå»åŠ¨å®ƒï¼‰
- å› æ­¤ï¼Œæœ€ç»ˆæ­£æ•°ä½ç½® +1 å³ä¸ºç¼ºå¤±æ•°å­—

**è¾¹ç•Œæƒ…å†µéªŒè¯ï¼š**

- å…¨éƒ¨æ•°å­—éƒ½å‡ºç° â†’ è¿”å›ç©ºåˆ—è¡¨ âœ…
- å…¨éƒ¨é‡å¤ï¼ˆå¦‚ [1,1,1]ï¼‰â†’ è¿”å› [2,3] âœ…
- å•å…ƒç´  [1] â†’ è¿”å› [] âœ…

______________________________________________________________________

## ğŸ“Š å¤æ‚åº¦åˆ†æ

| æ–¹æ³• | æ—¶é—´å¤æ‚åº¦ | ç©ºé—´å¤æ‚åº¦ | æ˜¯å¦ç¬¦åˆè¿›é˜¶è¦æ±‚ |
|------|------------|------------|------------------|
| Set æ³• | O(n) | O(n) | âŒ |
| åŸåœ°æ ‡è®°æ³• | O(n) | O(1)ï¼ˆè¾“å‡ºé™¤å¤–ï¼‰ | âœ… |
| ç´¢å¼•äº¤æ¢æ³• | O(n) | O(1) | âœ… |

> âš ï¸ æ³¨æ„ï¼šé¢˜ç›®å…è®¸è¾“å‡ºæ•°ç»„å ç”¨ç©ºé—´ï¼Œå› æ­¤ O(1) æŒ‡çš„æ˜¯**é™¤è¾“å‡ºå¤–**çš„é¢å¤–ç©ºé—´ã€‚

______________________________________________________________________

## ğŸ“Œ é—®é¢˜æ€»ç»“

- **å…³é”®æ´å¯Ÿ**ï¼šåˆ©ç”¨æ•°ç»„ä¸‹æ ‡ä¸å€¼çš„æ˜ å°„å…³ç³»ï¼Œå°†æ•°ç»„è‡ªèº«å½“ä½œå“ˆå¸Œè¡¨ã€‚
- **æŠ€å·§**ï¼šé€šè¿‡â€œç¬¦å·ä½â€å­˜å‚¨é¢å¤–ä¿¡æ¯ï¼ˆæ­£/è´Ÿè¡¨ç¤ºæ˜¯å¦å‡ºç°ï¼‰ï¼Œæ˜¯åŸåœ°ç®—æ³•çš„ç»å…¸æ‰‹æ³•ã€‚
- **é€‚ç”¨åœºæ™¯**ï¼šå½“æ•°ç»„å…ƒç´ èŒƒå›´å—é™ï¼ˆå¦‚ `[1, n]`ï¼‰æ—¶ï¼Œå¯è€ƒè™‘ä¸‹æ ‡æ˜ å°„ã€‚
- **å»¶ä¼¸æ€è€ƒ**ï¼šç±»ä¼¼æŠ€å·§ä¹Ÿç”¨äº [LeetCode 41. ç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°](https://leetcode.cn/problems/first-missing-positive/)ã€‚

> ğŸ’¡ **è®°ä½**ï¼šåœ¨ä¸å…è®¸é¢å¤–ç©ºé—´çš„æ•°ç»„é—®é¢˜ä¸­ï¼Œâ€œä¸‹æ ‡å³ä¿¡æ¯â€ æ˜¯é‡è¦çªç ´å£ï¼
