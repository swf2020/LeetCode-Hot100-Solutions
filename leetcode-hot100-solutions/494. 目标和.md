### é—®é¢˜ç®€ä»‹

ğŸ”— [LeetCode 494. ç›®æ ‡å’Œ](https://leetcode.cn/problems/target-sum?envType=problem-list-v2&envId=2cktkvj)

ğŸ“Œ **é¢˜ç›®æè¿°**ï¼š

ç»™ä½ ä¸€ä¸ªéè´Ÿæ•´æ•°æ•°ç»„ `nums` å’Œä¸€ä¸ªæ•´æ•° `target`ã€‚

å‘æ•°ç»„ä¸­çš„æ¯ä¸ªæ•´æ•°å‰æ·»åŠ  `'+'` æˆ– `'-'` ï¼Œç„¶åä¸²è”èµ·æ‰€æœ‰æ•´æ•°ï¼Œå¯ä»¥æ„é€ ä¸€ä¸ªè¡¨è¾¾å¼ã€‚è¿”å›å¯ä»¥é€šè¿‡ä¸Šè¿°æ–¹æ³•æ„é€ çš„ã€è¿ç®—ç»“æœç­‰äº `target` çš„ä¸åŒè¡¨è¾¾å¼çš„æ•°ç›®ã€‚

______________________________________________________________________

### ç¤ºä¾‹è¯´æ˜

âœ… **ç¤ºä¾‹ 1**ï¼š

```
è¾“å…¥ï¼šnums = [1,1,1,1,1], target = 3
è¾“å‡ºï¼š5
è§£é‡Šï¼šä¸€å…±æœ‰ 5 ç§æ–¹æ³•è®©æœ€ç»ˆç›®æ ‡å’Œä¸º 3ã€‚
-1 + 1 + 1 + 1 + 1 = 3
+1 - 1 + 1 + 1 + 1 = 3
+1 + 1 - 1 + 1 + 1 = 3
+1 + 1 + 1 - 1 + 1 = 3
+1 + 1 + 1 + 1 - 1 = 3
```

âœ… **ç¤ºä¾‹ 2**ï¼š

```
è¾“å…¥ï¼šnums = [1], target = 1
è¾“å‡ºï¼š1
```

______________________________________________________________________

### è§£é¢˜æ€è·¯

ğŸ’¡ **æ ¸å¿ƒè§‚å¯Ÿ**ï¼š

å°†æ•°ç»„åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š

- æ­£å·é›†åˆ Pï¼ˆåŠ ï¼‰
- è´Ÿå·é›†åˆ Nï¼ˆå‡ï¼‰

åˆ™æœ‰ï¼š

```
sum(P) - sum(N) = target
sum(P) + sum(N) = sum(nums)
```

ä¸¤å¼ç›¸åŠ å¾—ï¼š

```
2 * sum(P) = target + sum(nums)
=> sum(P) = (target + sum(nums)) / 2
```

å› æ­¤ï¼Œé—®é¢˜è½¬åŒ–ä¸ºï¼š**åœ¨ `nums` ä¸­é€‰å‡ºè‹¥å¹²å…ƒç´ ï¼Œä½¿å…¶å’Œä¸º `(target + sum) / 2` çš„æ–¹æ¡ˆæ•°**ã€‚

âš ï¸ æ³¨æ„å‰ææ¡ä»¶ï¼š

- `target + sum(nums)` å¿…é¡»æ˜¯éè´Ÿå¶æ•°ï¼Œå¦åˆ™æ— è§£ã€‚

______________________________________________________________________

#### âœ… è§£æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’ï¼ˆ0-1 èƒŒåŒ…ï¼‰

è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„ **0-1 èƒŒåŒ…è®¡æ•°é—®é¢˜**ã€‚

å®šä¹‰ `dp[j]` è¡¨ç¤ºç»„æˆå’Œä¸º `j` çš„æ–¹æ¡ˆæ•°ã€‚

çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š

```
dp[j] += dp[j - num]
```

åˆå§‹åŒ–ï¼š`dp[0] = 1`ï¼ˆå’Œä¸º 0 æœ‰ä¸€ç§æ–¹æ¡ˆï¼šä¸é€‰ä»»ä½•æ•°ï¼‰

éå†é¡ºåºï¼šå¤–å±‚éå† `nums`ï¼Œå†…å±‚ä» `target_sum` åˆ° `num` å€’åºæ›´æ–°ï¼ˆé˜²æ­¢é‡å¤ä½¿ç”¨ï¼‰ã€‚

______________________________________________________________________

#### âŒ è§£æ³•äºŒï¼šæš´åŠ› DFSï¼ˆè¶…æ—¶ï¼‰

å¯¹æ¯ä¸ªæ•°é€‰æ‹© `+` æˆ– `-`ï¼Œé€’å½’åˆ°åº•åˆ¤æ–­æ˜¯å¦ç­‰äº `target`ã€‚

æ—¶é—´å¤æ‚åº¦ï¼šO(2^n)ï¼Œn=20 æ—¶å‹‰å¼ºå¯è¿‡ï¼Œä½† n æ›´å¤§æ—¶ä¼šè¶…æ—¶ã€‚

> LeetCode æµ‹è¯•ç”¨ä¾‹ä¸­ n æœ€å¤§ä¸º 20ï¼Œä½†å®˜æ–¹æœŸæœ›ä½¿ç”¨ DPã€‚

______________________________________________________________________

#### ğŸ’¡ è§£æ³•ä¸‰ï¼šè®°å¿†åŒ–æœç´¢ï¼ˆDFS + ç¼“å­˜ï¼‰

ä½¿ç”¨ `(index, current_sum)` ä½œä¸ºçŠ¶æ€ç¼“å­˜ï¼Œé¿å…é‡å¤è®¡ç®—ã€‚

è™½ç„¶å¯è¡Œï¼Œä½†ä¸å¦‚ DP ç®€æ´é«˜æ•ˆã€‚

______________________________________________________________________

### Java ä¸ Go ä»£ç å®ç°

```java
// Java å®ç°ï¼šåŠ¨æ€è§„åˆ’ï¼ˆ0-1 èƒŒåŒ…ï¼‰
class Solution {
    public int findTargetSumWays(int[] nums, int target) {
        int sum = 0;
        for (int num : nums) sum += num;
        
        // æ£€æŸ¥å¯è¡Œæ€§
        if (Math.abs(target) > sum || (sum + target) % 2 != 0) {
            return 0;
        }
        
        int bagSize = (sum + target) / 2;
        if (bagSize < 0) return 0; // é˜²æ­¢è´Ÿæ•°
        
        int[] dp = new int[bagSize + 1];
        dp[0] = 1;
        
        for (int num : nums) {
            for (int j = bagSize; j >= num; j--) {
                dp[j] += dp[j - num];
            }
        }
        
        return dp[bagSize];
    }
}
```

```go
// Go å®ç°ï¼šåŠ¨æ€è§„åˆ’ï¼ˆ0-1 èƒŒåŒ…ï¼‰
func findTargetSumWays(nums []int, target int) int {
    sum := 0
    for _, num := range nums {
        sum += num
    }

    // æ£€æŸ¥å¯è¡Œæ€§
    if abs(target) > sum || (sum+target)%2 != 0 {
        return 0
    }

    bagSize := (sum + target) / 2
    if bagSize < 0 {
        return 0
    }

    dp := make([]int, bagSize+1)
    dp[0] = 1

    for _, num := range nums {
        for j := bagSize; j >= num; j-- {
            dp[j] += dp[j-num]
        }
    }

    return dp[bagSize]
}

func abs(x int) int {
    if x < 0 {
        return -x
    }
    return x
}
```

---

### ç¤ºä¾‹æ¼”ç¤º

ä»¥ `nums = [1,1,1,1,1], target = 3` ä¸ºä¾‹ï¼š

- `sum = 5`
- `bagSize = (5 + 3) / 2 = 4`
- é—®é¢˜è½¬åŒ–ä¸ºï¼šæœ‰å¤šå°‘ç§æ–¹å¼é€‰å‡ºè‹¥å¹² 1ï¼Œä½¿å…¶å’Œä¸º 4ï¼Ÿ
- æ˜¾ç„¶ï¼šå¿…é¡»é€‰ 4 ä¸ª 1ï¼Œå…± C(5,4) = 5 ç§ â†’ è¾“å‡º 5 âœ…

---

### ç­”æ¡ˆæœ‰æ•ˆæ€§è¯æ˜

âœ… **æ•°å­¦ç­‰ä»·æ€§**ï¼š

ç”± `sum(P) - sum(N) = target` å’Œ `sum(P) + sum(N) = total` æ¨å¯¼å‡º `sum(P) = (total + target)/2` æ˜¯ä¸¥æ ¼ç­‰ä»·å˜æ¢ï¼Œåªè¦è¯¥å€¼ä¸ºéè´Ÿæ•´æ•°ï¼ŒåŸé—®é¢˜ä¸å­é›†å’Œé—®é¢˜ä¸€ä¸€å¯¹åº”ã€‚

âœ… **DP æ­£ç¡®æ€§**ï¼š

- `dp[0] = 1` æ­£ç¡®ï¼ˆç©ºé›†å’Œä¸º 0ï¼‰
- æ¯æ¬¡åŠ å…¥ä¸€ä¸ª `num`ï¼Œæ›´æ–°æ‰€æœ‰å¯èƒ½çš„å’Œï¼Œä¸”å€’åºé¿å…é‡å¤ä½¿ç”¨
- æœ€ç»ˆ `dp[bagSize]` å³ä¸ºæ‰€æ±‚æ–¹æ¡ˆæ•°

âœ… **è¾¹ç•Œå¤„ç†**ï¼š

- è‹¥ `|target| > sum`ï¼Œä¸å¯èƒ½è¾¾æˆ
- è‹¥ `(sum + target)` ä¸ºå¥‡æ•°ï¼Œæ— æ³•æ•´é™¤ 2ï¼Œæ— è§£
- è‹¥ `bagSize < 0`ï¼Œè¯´æ˜ `target` ä¸ºè´Ÿä¸”ç»å¯¹å€¼è¿‡å¤§ï¼Œä¹Ÿæ— è§£

---

### å¤æ‚åº¦åˆ†æ

| é¡¹ç›® | å¤æ‚åº¦ |
|------|--------|
| æ—¶é—´å¤æ‚åº¦ | O(n Ã— S)ï¼Œå…¶ä¸­ `n = nums.length`ï¼Œ`S = (sum + target) / 2` |
| ç©ºé—´å¤æ‚åº¦ | O(S)ï¼Œä½¿ç”¨ä¸€ç»´ DP æ•°ç»„ |

> ç›¸æ¯” DFS çš„ O(2^n)ï¼ŒDP åœ¨ `sum` ä¸å¤ªå¤§æ—¶æ•ˆç‡æé«˜ã€‚

---

### é—®é¢˜æ€»ç»“

ğŸ“Œ **å…³é”®è½¬åŒ–**ï¼šå°†ç¬¦å·åˆ†é…é—®é¢˜ â†’ å­é›†å’Œé—®é¢˜ï¼ˆ0-1 èƒŒåŒ…è®¡æ•°ï¼‰

ğŸ“Œ **æ³¨æ„äº‹é¡¹**ï¼š
- å¿…é¡»æ£€æŸ¥ `(sum + target)` æ˜¯å¦ä¸ºéè´Ÿå¶æ•°
- `bagSize` å¯èƒ½ä¸ºè´Ÿï¼Œéœ€æå‰è¿”å› 0
- ä½¿ç”¨ä¸€ç»´ DP ä¼˜åŒ–ç©ºé—´

ğŸ“Œ **é€‚ç”¨åœºæ™¯**ï¼šå½“é—®é¢˜æ¶‰åŠâ€œé€‰æ‹©æ­£è´Ÿå·ä½¿å’Œä¸ºç›®æ ‡å€¼â€æ—¶ï¼Œä¼˜å…ˆè€ƒè™‘æ­¤è½¬åŒ–æŠ€å·§ã€‚

âœ… **ä¸€å¥è¯æ€»ç»“**ï¼š**ç›®æ ‡å’Œ = èƒŒåŒ…å®¹é‡ï¼Œæ–¹æ¡ˆæ•° = èƒŒåŒ…è®¡æ•°**ã€‚
