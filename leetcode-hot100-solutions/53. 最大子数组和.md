#  é—®é¢˜ç®€ä»‹

[LeetCode 53. æœ€å¤§å­æ•°ç»„å’Œ](https://leetcode.cn/problems/maximum-subarray?envType=problem-list-v2&envId=2cktkvj)

## é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums`ï¼Œè¯·ä½ æ‰¾å‡ºä¸€ä¸ªå…·æœ‰æœ€å¤§å’Œçš„è¿ç»­å­æ•°ç»„ï¼ˆå­æ•°ç»„æœ€å°‘åŒ…å«ä¸€ä¸ªå…ƒç´ ï¼‰ï¼Œè¿”å›å…¶æœ€å¤§å’Œã€‚

**å­æ•°ç»„** æ˜¯æ•°ç»„ä¸­çš„ä¸€ä¸ªè¿ç»­éƒ¨åˆ†ã€‚

______________________________________________________________________

# ğŸ“Œ ç¤ºä¾‹è¯´æ˜

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [-2,1,-3,4,-1,2,1,-5,4]
è¾“å‡ºï¼š6
è§£é‡Šï¼šè¿ç»­å­æ•°ç»„ [4,-1,2,1] çš„å’Œæœ€å¤§ï¼Œä¸º 6ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [1]
è¾“å‡ºï¼š1
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šnums = [5,4,-1,7,8]
è¾“å‡ºï¼š23
```

______________________________________________________________________

# ğŸ’¡ è§£é¢˜æ€è·¯

## æ–¹æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’ï¼ˆKadane ç®—æ³•ï¼‰âœ…ï¼ˆæ¨èï¼‰

è¿™æ˜¯è§£å†³æœ€å¤§å­æ•°ç»„å’Œé—®é¢˜æœ€ç»å…¸ã€æœ€é«˜æ•ˆçš„æ–¹æ³•ã€‚

### æ€è·¯æ­¥éª¤ï¼š

1. **å®šä¹‰çŠ¶æ€**ï¼šè®¾ `dp[i]` è¡¨ç¤ºä»¥ `nums[i]` ç»“å°¾çš„æœ€å¤§å­æ•°ç»„å’Œã€‚
1. **çŠ¶æ€è½¬ç§»æ–¹ç¨‹**ï¼š
   - å¦‚æœ `dp[i-1] > 0`ï¼Œé‚£ä¹ˆ `dp[i] = dp[i-1] + nums[i]`ï¼ˆåŠ ä¸Šå‰é¢çš„æ­£æ”¶ç›Šï¼‰
   - å¦åˆ™ `dp[i] = nums[i]`ï¼ˆä»å½“å‰é‡æ–°å¼€å§‹ï¼‰
   - å¯ç®€åŒ–ä¸ºï¼š`dp[i] = max(nums[i], dp[i-1] + nums[i])`
1. **åˆå§‹åŒ–**ï¼š`dp[0] = nums[0]`
1. **ç»“æœ**ï¼šæ‰€æœ‰ `dp[i]` ä¸­çš„æœ€å¤§å€¼

> å®é™…ä¸Šæˆ‘ä»¬ä¸éœ€è¦ä¿å­˜æ•´ä¸ª `dp` æ•°ç»„ï¼Œåªéœ€ç»´æŠ¤ä¸€ä¸ªå˜é‡è®°å½•å½“å‰æœ€å¤§å­æ•°ç»„å’Œå³å¯ï¼Œç©ºé—´å¤æ‚åº¦å¯ä¼˜åŒ–åˆ° O(1)ã€‚

______________________________________________________________________

## æ–¹æ³•äºŒï¼šåˆ†æ²»æ³•ï¼ˆäº†è§£å³å¯ï¼‰

å°†æ•°ç»„åˆ†ä¸ºå·¦å³ä¸¤åŠï¼Œæœ€å¤§å­æ•°ç»„å’Œå¯èƒ½å‡ºç°åœ¨ï¼š

- å·¦åŠéƒ¨åˆ†
- å³åŠéƒ¨åˆ†
- è·¨è¶Šä¸­ç‚¹çš„éƒ¨åˆ†

é€’å½’æ±‚è§£å·¦å³éƒ¨åˆ†ï¼Œå†è®¡ç®—è·¨è¶Šä¸­ç‚¹çš„æœ€å¤§å’Œï¼Œå–ä¸‰è€…æœ€å¤§å€¼ã€‚

> æ—¶é—´å¤æ‚åº¦ O(n log n)ï¼Œä¸å¦‚ Kadane ç®—æ³•é«˜æ•ˆï¼Œä½†æœ‰åŠ©äºç†è§£åˆ†æ²»æ€æƒ³ã€‚

______________________________________________________________________

## æ–¹æ³•ä¸‰ï¼šæš´åŠ›æšä¸¾ï¼ˆâŒ ä¸æ¨èï¼‰

åŒé‡å¾ªç¯æšä¸¾æ‰€æœ‰å­æ•°ç»„ï¼Œè®¡ç®—å’Œå¹¶æ›´æ–°æœ€å¤§å€¼ã€‚

> æ—¶é—´å¤æ‚åº¦ O(nÂ²)ï¼Œåœ¨ LeetCode ä¸Šä¼šè¶…æ—¶ã€‚

______________________________________________________________________

# ğŸ’» ä»£ç å®ç°

```java
// Java å®ç° - åŠ¨æ€è§„åˆ’ï¼ˆKadane ç®—æ³•ï¼‰
class Solution {
    public int maxSubArray(int[] nums) {
        int maxSum = nums[0];      // å…¨å±€æœ€å¤§å’Œ
        int currentSum = nums[0];  // å½“å‰å­æ•°ç»„å’Œ
        
        for (int i = 1; i < nums.length; i++) {
            // å†³å®šæ˜¯ç»§ç»­ç´¯åŠ è¿˜æ˜¯ä»å½“å‰å…ƒç´ é‡æ–°å¼€å§‹
            currentSum = Math.max(nums[i], currentSum + nums[i]);
            // æ›´æ–°å…¨å±€æœ€å¤§å€¼
            maxSum = Math.max(maxSum, currentSum);
        }
        
        return maxSum;
    }
}
````

```go
// Go å®ç° - åŠ¨æ€è§„åˆ’ï¼ˆKadane ç®—æ³•ï¼‰
func maxSubArray(nums []int) int {
    maxSum := nums[0]      // å…¨å±€æœ€å¤§å’Œ
    currentSum := nums[0]  // å½“å‰å­æ•°ç»„å’Œ

    for i := 1; i < len(nums); i++ {
        // å†³å®šæ˜¯ç»§ç»­ç´¯åŠ è¿˜æ˜¯ä»å½“å‰å…ƒç´ é‡æ–°å¼€å§‹
        if currentSum+nums[i] > nums[i] {
            currentSum += nums[i]
        } else {
            currentSum = nums[i]
        }
        // æ›´æ–°å…¨å±€æœ€å¤§å€¼
        if currentSum > maxSum {
            maxSum = currentSum
        }
    }

    return maxSum
}
```


---

# ğŸ§ª ç¤ºä¾‹æ¼”ç¤º

ä»¥ `nums = [-2,1,-3,4,-1,2,1,-5,4]` ä¸ºä¾‹ï¼š

| i | nums[i] | currentSumï¼ˆå½“å‰å­æ•°ç»„å’Œï¼‰ | maxSumï¼ˆå…¨å±€æœ€å¤§ï¼‰ |
|---|---------|----------------------------|---------------------|
| 0 | -2      | -2                         | -2                  |
| 1 | 1       | 1                          | 1                   |
| 2 | -3      | -2                         | 1                   |
| 3 | 4       | 4                          | 4                   |
| 4 | -1      | 3                          | 4                   |
| 5 | 2       | 5                          | 5                   |
| 6 | 1       | 6                          | **6**               |
| 7 | -5      | 1                          | 6                   |
| 8 | 4       | 5                          | 6                   |

âœ… æœ€ç»ˆè¿”å› `6`ï¼Œå¯¹åº”å­æ•°ç»„ `[4, -1, 2, 1]`

---

# âœ… ç­”æ¡ˆæœ‰æ•ˆæ€§è¯æ˜

**æ•°å­¦å½’çº³æ³•ç®€è¦è¯æ˜ Kadane ç®—æ³•æ­£ç¡®æ€§ï¼š**

- **åŸºç¡€æƒ…å†µ**ï¼šå½“æ•°ç»„åªæœ‰ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œç®—æ³•è¿”å›è¯¥å…ƒç´ ï¼Œæ˜¾ç„¶æ­£ç¡®ã€‚
- **å½’çº³å‡è®¾**ï¼šå‡è®¾å¯¹äºå‰ `k` ä¸ªå…ƒç´ ï¼Œ`currentSum` æ­£ç¡®è¡¨ç¤ºä»¥ç¬¬ `k` ä¸ªå…ƒç´ ç»“å°¾çš„æœ€å¤§å­æ•°ç»„å’Œã€‚
- **å½’çº³æ­¥éª¤**ï¼šè€ƒè™‘ç¬¬ `k+1` ä¸ªå…ƒç´ ï¼š
  - è‹¥ `currentSum > 0`ï¼ŒåŠ ä¸Š `nums[k+1]` ä¸€å®šæ¯”å•ç‹¬ `nums[k+1]` æ›´ä¼˜ï¼›
  - è‹¥ `currentSum â‰¤ 0`ï¼Œåˆ™ä» `nums[k+1]` é‡æ–°å¼€å§‹æ›´ä¼˜ã€‚
  - å› æ­¤ `currentSum = max(nums[k+1], currentSum + nums[k+1])` æ­£ç¡®ã€‚

åŒæ—¶ï¼Œ`maxSum` å§‹ç»ˆè®°å½•å†å²æœ€å¤§å€¼ï¼Œæ•…æœ€ç»ˆç»“æœæ­£ç¡®ã€‚

---

# ğŸ“Š å¤æ‚åº¦åˆ†æ

| æ–¹æ³•         | æ—¶é—´å¤æ‚åº¦ | ç©ºé—´å¤æ‚åº¦ | æ˜¯å¦æœ€ä¼˜ |
|--------------|------------|------------|----------|
| åŠ¨æ€è§„åˆ’ï¼ˆKadaneï¼‰ | O(n)       | O(1)       | âœ… æ˜¯     |
| åˆ†æ²»æ³•       | O(n log n) | O(log n)   | âŒ å¦     |
| æš´åŠ›æšä¸¾     | O(nÂ²)      | O(1)       | âŒ å¦     |

> âœ… **Kadane ç®—æ³•æ˜¯æœ€ä¼˜è§£**ï¼šçº¿æ€§æ—¶é—´ï¼Œå¸¸æ•°ç©ºé—´ã€‚

---

# ğŸ“Œ é—®é¢˜æ€»ç»“

- **æ ¸å¿ƒæ€æƒ³**ï¼šè´ªå¿ƒ + åŠ¨æ€è§„åˆ’ã€‚åªè¦å½“å‰ç´¯è®¡å’Œä¸ºæ­£ï¼Œå°±å€¼å¾—ä¿ç•™ï¼›å¦åˆ™æœæ–­èˆå¼ƒï¼Œä»æ–°ä½ç½®å¼€å§‹ã€‚
- **å…³é”®æ´å¯Ÿ**ï¼šæœ€å¤§å­æ•°ç»„å’Œä¸€å®šæ˜¯ä»¥æŸä¸ªä½ç½®ç»“å°¾çš„å­æ•°ç»„ä¸­çš„æœ€å¤§å€¼ã€‚
- **åº”ç”¨åœºæ™¯**ï¼šè‚¡ç¥¨æœ€å¤§æ”¶ç›Šï¼ˆä¸€æ¬¡äº¤æ˜“ï¼‰ã€ä¿¡å·å¤„ç†ä¸­çš„å³°å€¼æ£€æµ‹ç­‰ã€‚
- **æ‰©å±•æ€è€ƒ**ï¼š
  - å¦‚æœè¦æ±‚è¿”å›å­æ•°ç»„çš„èµ·æ­¢ç´¢å¼•ï¼Ÿâ†’ å¯é¢å¤–è®°å½•èµ·å§‹ä½ç½®ã€‚
  - å¦‚æœæ•°ç»„å…¨ä¸ºè´Ÿæ•°ï¼Ÿâ†’ ç®—æ³•ä»æœ‰æ•ˆï¼Œè¿”å›æœ€å¤§è´Ÿæ•°ã€‚
  - ç¯å½¢æ•°ç»„æœ€å¤§å­æ•°ç»„å’Œï¼Ÿâ†’ LeetCode 918ï¼Œéœ€ç»“åˆæ€»å’Œä¸æœ€å°å­æ•°ç»„å’Œã€‚

> ğŸ’¡ **è®°ä½ Kadane ç®—æ³•æ¨¡æ¿**ï¼š  
> `current = max(nums[i], current + nums[i])`  
> `global_max = max(global_max, current)`
