# é—®é¢˜ç®€ä»‹

[LeetCode 78. å­é›†](https://leetcode.cn/problems/subsets?envType=problem-list-v2&envId=2cktkvj)

## é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œæ•°ç»„ä¸­çš„å…ƒç´  **äº’ä¸ç›¸åŒ** ã€‚è¿”å›è¯¥æ•°ç»„æ‰€æœ‰å¯èƒ½çš„å­é›†ï¼ˆå¹‚é›†ï¼‰ã€‚

è§£é›† **ä¸èƒ½** åŒ…å«é‡å¤çš„å­é›†ã€‚ä½ å¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** è¿”å›è§£é›†ã€‚

______________________________________________________________________

# ç¤ºä¾‹è¯´æ˜

âœ… **ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [1,2,3]
è¾“å‡ºï¼š[[],[1],[2],[1,2],[3],[1,3],[2,3],[1,2,3]]
```

âœ… **ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [0]
è¾“å‡ºï¼š[[],[0]]
```

ğŸ“Œ **æç¤ºï¼š**

- `1 <= nums.length <= 10`
- `-10 <= nums[i] <= 10`
- `nums` ä¸­çš„æ‰€æœ‰å…ƒç´  **äº’ä¸ç›¸åŒ**

______________________________________________________________________

# è§£é¢˜æ€è·¯

## æ–¹æ³•ä¸€ï¼šå›æº¯æ³•ï¼ˆæ¨è âœ…ï¼‰

ğŸ’¡ **æ ¸å¿ƒæ€æƒ³ï¼š**\
å¯¹äºæ¯ä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§é€‰æ‹©ï¼š**é€‰** æˆ– **ä¸é€‰**ã€‚é€šè¿‡é€’å½’ + å›æº¯çš„æ–¹å¼ï¼Œéå†æ‰€æœ‰å¯èƒ½çš„é€‰æ‹©è·¯å¾„ï¼Œå³å¯å¾—åˆ°æ‰€æœ‰å­é›†ã€‚

### æ­¥éª¤è¯¦è§£ï¼š

1. åˆå§‹åŒ–ç»“æœåˆ—è¡¨ `res` å’Œå½“å‰è·¯å¾„ `path`ã€‚
1. ä»ç´¢å¼• `start = 0` å¼€å§‹é€’å½’ã€‚
1. æ¯æ¬¡è¿›å…¥é€’å½’å‡½æ•°æ—¶ï¼Œå…ˆå°†å½“å‰ `path` åŠ å…¥ç»“æœï¼ˆå› ä¸ºæ¯ä¸ªè·¯å¾„éƒ½æ˜¯ä¸€ä¸ªåˆæ³•å­é›†ï¼‰ã€‚
1. ä» `start` åˆ° `n-1` éå†ï¼š
   - å°† `nums[i]` åŠ å…¥ `path`
   - é€’å½’è°ƒç”¨ `backtrack(i + 1)`
   - å›æº¯ï¼šç§»é™¤ `nums[i]`ï¼ˆæ¢å¤çŠ¶æ€ï¼‰
1. é€’å½’ç»ˆæ­¢æ¡ä»¶ï¼šå½“ `start == n` æ—¶è‡ªç„¶ç»“æŸï¼ˆæ— éœ€æ˜¾å¼åˆ¤æ–­ï¼‰ã€‚

âœ… **ä¼˜ç‚¹ï¼š** é€»è¾‘æ¸…æ™°ï¼Œæ˜“äºç†è§£ï¼Œé€‚ç”¨äºå¸¦å»é‡æˆ–é™åˆ¶æ¡ä»¶çš„å˜ç§é¢˜ã€‚

______________________________________________________________________

## æ–¹æ³•äºŒï¼šä½è¿ç®—æ³•ï¼ˆBit Manipulationï¼‰

ğŸ’¡ **æ ¸å¿ƒæ€æƒ³ï¼š**\
é•¿åº¦ä¸º `n` çš„æ•°ç»„ï¼Œå…¶å­é›†æ€»æ•°ä¸º `2^n`ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ `0` åˆ° `2^n - 1` çš„æ¯ä¸€ä¸ªæ•´æ•°çš„äºŒè¿›åˆ¶è¡¨ç¤ºæ¥ä»£è¡¨ä¸€ä¸ªå­é›†ï¼š

- ç¬¬ `i` ä½ä¸º `1` è¡¨ç¤ºåŒ…å« `nums[i]`ï¼Œä¸º `0` è¡¨ç¤ºä¸åŒ…å«ã€‚

### æ­¥éª¤è¯¦è§£ï¼š

1. è®¡ç®— `n = nums.length`
1. éå† `mask` ä» `0` åˆ° `(1 << n) - 1`
1. å¯¹æ¯ä¸ª `mask`ï¼Œæ£€æŸ¥å…¶äºŒè¿›åˆ¶æ¯ä¸€ä½ï¼š
   - è‹¥ç¬¬ `i` ä½ä¸º 1ï¼Œåˆ™å°† `nums[i]` åŠ å…¥å½“å‰å­é›†
1. å°†ç”Ÿæˆçš„å­é›†åŠ å…¥ç»“æœåˆ—è¡¨

âœ… **ä¼˜ç‚¹ï¼š** ä»£ç ç®€æ´ï¼Œæ— é€’å½’å¼€é”€ï¼Œé€‚åˆå°è§„æ¨¡æ•°æ®ï¼ˆæœ¬é¢˜ `n â‰¤ 10` å®Œå…¨é€‚ç”¨ï¼‰ã€‚

______________________________________________________________________

## æ–¹æ³•ä¸‰ï¼šè¿­ä»£æ„å»ºæ³•ï¼ˆBFS æ€æƒ³ï¼‰

ğŸ’¡ **æ ¸å¿ƒæ€æƒ³ï¼š**\
ä»ç©ºé›†å¼€å§‹ï¼Œé€ä¸ªæ·»åŠ å…ƒç´ ï¼šæ¯é‡åˆ°ä¸€ä¸ªæ–°å…ƒç´ ï¼Œå°±å°†å®ƒåŠ å…¥åˆ°å·²æœ‰æ‰€æœ‰å­é›†ä¸­ï¼Œå½¢æˆæ–°çš„å­é›†ã€‚

### æ­¥éª¤è¯¦è§£ï¼š

1. åˆå§‹åŒ–ç»“æœä¸º `[[]]`
1. éå† `nums` ä¸­æ¯ä¸ªå…ƒç´  `num`ï¼š
   - éå†å½“å‰ç»“æœä¸­çš„æ¯ä¸ªå­é›† `subset`
   - å°† `subset + [num]` åŠ å…¥ç»“æœï¼ˆæ³¨æ„è¦å¤åˆ¶ï¼Œé¿å…å¼•ç”¨é—®é¢˜ï¼‰
1. è¿”å›æœ€ç»ˆç»“æœ

âœ… **ä¼˜ç‚¹ï¼š** ç›´è§‚æ¨¡æ‹Ÿå­é›†ç”Ÿæˆè¿‡ç¨‹ï¼Œæ˜“äºç†è§£ã€‚

______________________________________________________________________

# ä»£ç å®ç°

<div class="code-tabs">

```java:Java
// æ–¹æ³•ä¸€ï¼šå›æº¯æ³•
class Solution {
    public List<List<Integer>> subsets(int[] nums) {
        List<List<Integer>> res = new ArrayList<>();
        backtrack(nums, 0, new ArrayList<>(), res);
        return res;
    }

    private void backtrack(int[] nums, int start, List<Integer> path, List<List<Integer>> res) {
        res.add(new ArrayList<>(path)); // å½“å‰è·¯å¾„æ˜¯ä¸€ä¸ªå­é›†
        for (int i = start; i < nums.length; i++) {
            path.add(nums[i]);
            backtrack(nums, i + 1, path, res);
            path.remove(path.size() - 1); // å›æº¯
        }
    }
}

// æ–¹æ³•äºŒï¼šä½è¿ç®—æ³•
class Solution {
    public List<List<Integer>> subsets(int[] nums) {
        List<List<Integer>> res = new ArrayList<>();
        int n = nums.length;
        for (int mask = 0; mask < (1 << n); mask++) {
            List<Integer> subset = new ArrayList<>();
            for (int i = 0; i < n; i++) {
                if ((mask & (1 << i)) != 0) {
                    subset.add(nums[i]);
                }
            }
            res.add(subset);
        }
        return res;
    }
}

// æ–¹æ³•ä¸‰ï¼šè¿­ä»£æ³•
class Solution {
    public List<List<Integer>> subsets(int[] nums) {
        List<List<Integer>> res = new ArrayList<>();
        res.add(new ArrayList<>()); // ç©ºé›†

        for (int num : nums) {
            int size = res.size();
            for (int i = 0; i < size; i++) {
                List<Integer> newSubset = new ArrayList<>(res.get(i));
                newSubset.add(num);
                res.add(newSubset);
            }
        }
        return res;
    }
}
```

```go:Go
// æ–¹æ³•ä¸€ï¼šå›æº¯æ³•
func subsets(nums []int) [][]int {
    var res [][]int
    var path []int
    var backtrack func(start int)
    backtrack = func(start int) {
        // å¤åˆ¶å½“å‰ path
        tmp := make([]int, len(path))
        copy(tmp, path)
        res = append(res, tmp)

        for i := start; i < len(nums); i++ {
            path = append(path, nums[i])
            backtrack(i + 1)
            path = path[:len(path)-1] // å›æº¯
        }
    }
    backtrack(0)
    return res
}

// æ–¹æ³•äºŒï¼šä½è¿ç®—æ³•
func subsets(nums []int) [][]int {
    n := len(nums)
    res := [][]int{}
    for mask := 0; mask < (1 << n); mask++ {
        subset := []int{}
        for i := 0; i < n; i++ {
            if mask&(1<<i) != 0 {
                subset = append(subset, nums[i])
            }
        }
        res = append(res, subset)
    }
    return res
}

// æ–¹æ³•ä¸‰ï¼šè¿­ä»£æ³•
func subsets(nums []int) [][]int {
    res := [][]int{{}} // åˆå§‹åŒ…å«ç©ºé›†

    for _, num := range nums {
        size := len(res)
        for i := 0; i < size; i++ {
            newSubset := make([]int, len(res[i]))
            copy(newSubset, res[i])
            newSubset = append(newSubset, num)
            res = append(res, newSubset)
        }
    }
    return res
}
```

</div>

______________________________________________________________________

# ç¤ºä¾‹æ¼”ç¤º

ä»¥ `nums = [1,2,3]` ä¸ºä¾‹ï¼Œå±•ç¤º**å›æº¯æ³•**çš„æ‰§è¡Œè¿‡ç¨‹ï¼š

```
åˆå§‹: path=[], res=[[]]

i=0: path=[1] â†’ res=[[],[1]]
  i=1: path=[1,2] â†’ res=[[],[1],[1,2]]
    i=2: path=[1,2,3] â†’ res=[[],[1],[1,2],[1,2,3]]
  i=2: path=[1,3] â†’ res=[[],[1],[1,2],[1,2,3],[1,3]]

i=1: path=[2] â†’ res=...[2]
  i=2: path=[2,3] â†’ ...[2,3]

i=2: path=[3] â†’ ...[3]
```

æœ€ç»ˆå¾—åˆ°å…¨éƒ¨ 8 ä¸ªå­é›†ã€‚

______________________________________________________________________

# ç­”æ¡ˆæœ‰æ•ˆæ€§è¯æ˜

âœ… **å®Œå¤‡æ€§ï¼š**

- å›æº¯æ³•ï¼šæ¯ä¸ªå…ƒç´ éƒ½æœ‰â€œé€‰/ä¸é€‰â€ä¸¤ç§å†³ç­–ï¼Œå…± `2^n` æ¡è·¯å¾„ï¼Œè¦†ç›–æ‰€æœ‰å­é›†ã€‚
- ä½è¿ç®—æ³•ï¼š`0` åˆ° `2^n - 1` å…± `2^n` ä¸ªæ©ç ï¼Œä¸€ä¸€å¯¹åº”æ‰€æœ‰å­é›†ã€‚
- è¿­ä»£æ³•ï¼šæ¯æ­¥å°†æ–°å…ƒç´ åŠ å…¥å·²æœ‰å­é›†ï¼Œæ•°å­¦å½’çº³æ³•å¯è¯ç¬¬ `k` æ­¥åæœ‰ `2^k` ä¸ªå­é›†ã€‚

âœ… **æ— é‡å¤ï¼š**

- é¢˜ç›®ä¿è¯å…ƒç´ äº’ä¸ç›¸åŒï¼Œä¸”ä¸‰ç§æ–¹æ³•å‡æŒ‰å›ºå®šé¡ºåºå¤„ç†å…ƒç´ ï¼Œä¸ä¼šäº§ç”Ÿé‡å¤å­é›†ã€‚

âœ… **æ­£ç¡®æ€§ï¼š**\
æ‰€æœ‰æ–¹æ³•å‡é€šè¿‡ LeetCode å®˜æ–¹æµ‹è¯•ç”¨ä¾‹éªŒè¯ã€‚

______________________________________________________________________

# å¤æ‚åº¦åˆ†æ

| æ–¹æ³• | æ—¶é—´å¤æ‚åº¦ | ç©ºé—´å¤æ‚åº¦ | è¯´æ˜ |
|------|-----------|-----------|------|
| å›æº¯æ³• | `O(2^n * n)` | `O(n)`ï¼ˆé€’å½’æ ˆï¼‰ | æ¯ä¸ªå­é›†å¹³å‡é•¿åº¦ `n/2`ï¼Œå…± `2^n` ä¸ª |
| ä½è¿ç®—æ³• | `O(2^n * n)` | `O(1)`ï¼ˆä¸è®¡è¾“å‡ºï¼‰ | å¤–å±‚ `2^n`ï¼Œå†…å±‚ `n` ä½æ£€æŸ¥ |
| è¿­ä»£æ³• | `O(2^n * n)` | `O(2^n * n)`ï¼ˆå­˜å‚¨ç»“æœï¼‰ | æ¯è½®å¤åˆ¶å­é›†ï¼Œæ€»æ“ä½œæ•°åŒä¸Š |

ğŸ“Œ **æ³¨ï¼š** è¾“å‡ºæœ¬èº«å¤§å°ä¸º `O(2^n * n)`ï¼Œå› æ­¤æ‰€æœ‰æ–¹æ³•åœ¨æ—¶é—´ä¸Šéƒ½æ˜¯**æœ€ä¼˜çš„**ã€‚

______________________________________________________________________

# é—®é¢˜æ€»ç»“

âœ… **å…³é”®æ´å¯Ÿï¼š**\
å­é›†é—®é¢˜æœ¬è´¨æ˜¯**ç»„åˆæšä¸¾**ï¼Œæ ¸å¿ƒåœ¨äºâ€œæ¯ä¸ªå…ƒç´ é€‰æˆ–ä¸é€‰â€çš„äºŒå…ƒå†³ç­–ã€‚

âœ… **æ–¹æ³•å¯¹æ¯”ï¼š**

- **å›æº¯æ³•**ï¼šæœ€é€šç”¨ï¼Œé€‚åˆå¸¦æ¡ä»¶çš„å­é›†é—®é¢˜ï¼ˆå¦‚å­é›† IIã€ç»„åˆæ€»å’Œç­‰ï¼‰ã€‚
- **ä½è¿ç®—æ³•**ï¼šç®€æ´é«˜æ•ˆï¼Œé€‚åˆå…ƒç´ æ•°é‡å°‘ï¼ˆâ‰¤20ï¼‰çš„åœºæ™¯ã€‚
- **è¿­ä»£æ³•**ï¼šç›´è§‚æ˜“æ‡‚ï¼Œæ¨¡æ‹Ÿäººç±»æ„å»ºå­é›†çš„è¿‡ç¨‹ã€‚

ğŸ’¡ **æ‰©å±•æ€è€ƒï¼š**\
è‹¥æ•°ç»„ä¸­æœ‰é‡å¤å…ƒç´ ï¼ˆå¦‚ LeetCode 90. å­é›† IIï¼‰ï¼Œéœ€åœ¨å›æº¯æˆ–è¿­ä»£ä¸­åŠ å…¥**å»é‡é€»è¾‘**ï¼ˆå¦‚æ’åº + è·³è¿‡ç›¸åŒå…ƒç´ ï¼‰ã€‚

ğŸ“Œ **ä¸€å¥è¯æ€»ç»“ï¼š**\
**â€œå­é›† = æ‰€æœ‰å¯èƒ½çš„å…ƒç´ ç»„åˆâ€ï¼Œç”¨å›æº¯ã€ä½è¿ç®—æˆ–è¿­ä»£ï¼Œä»»ä½ æŒ‘é€‰ï¼**
