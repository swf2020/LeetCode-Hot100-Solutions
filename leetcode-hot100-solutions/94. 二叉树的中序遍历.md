# 94. äºŒå‰æ ‘çš„ä¸­åºéå†

## é—®é¢˜ç®€ä»‹

[LeetCode 94. äºŒå‰æ ‘çš„ä¸­åºéå†](https://leetcode.cn/problems/binary-tree-inorder-traversal?envType=problem-list-v2&envId=2cktkvj)

### é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ `root`ï¼Œè¿”å›å®ƒçš„ **ä¸­åº** éå†ã€‚

ä¸­åºéå†çš„è®¿é—®é¡ºåºæ˜¯ï¼š**å·¦å­æ ‘ â†’ æ ¹èŠ‚ç‚¹ â†’ å³å­æ ‘**

## ç¤ºä¾‹è¯´æ˜

âœ… **ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šroot = [1,null,2,3]
è¾“å‡ºï¼š[1,3,2]
```

![ç¤ºä¾‹1](https://assets.leetcode.com/uploads/2020/09/15/inorder_1.jpg)

âœ… **ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šroot = []
è¾“å‡ºï¼š[]
```

âœ… **ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šroot = [1]
è¾“å‡ºï¼š[1]
```

âœ… **ç¤ºä¾‹ 4ï¼š**

```
è¾“å…¥ï¼šroot = [1,2]
è¾“å‡ºï¼š[2,1]
```

âœ… **ç¤ºä¾‹ 5ï¼š**

```
è¾“å…¥ï¼šroot = [1,null,2]
è¾“å‡ºï¼š[1,2]
```

## è§£é¢˜æ€è·¯

### æ–¹æ³•ä¸€ï¼šé€’å½’æ³•ï¼ˆæ¨èï¼‰ğŸ’¡

è¿™æ˜¯æœ€ç›´è§‚å’Œç®€æ´çš„æ–¹æ³•ã€‚æŒ‰ç…§ä¸­åºéå†çš„å®šä¹‰ï¼š

1. é€’å½’éå†å·¦å­æ ‘
1. è®¿é—®æ ¹èŠ‚ç‚¹
1. é€’å½’éå†å³å­æ ‘

**æ­¥éª¤ï¼š**

- å¦‚æœå½“å‰èŠ‚ç‚¹ä¸ºç©ºï¼Œç›´æ¥è¿”å›
- é€’å½’å¤„ç†å·¦å­æ ‘
- å°†å½“å‰èŠ‚ç‚¹å€¼åŠ å…¥ç»“æœåˆ—è¡¨
- é€’å½’å¤„ç†å³å­æ ‘

### æ–¹æ³•äºŒï¼šè¿­ä»£æ³•ï¼ˆä½¿ç”¨æ ˆï¼‰ğŸ“Œ

ç”±äºé€’å½’æœ¬è´¨ä¸Šæ˜¯ä½¿ç”¨ç³»ç»Ÿè°ƒç”¨æ ˆï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨æ¨¡æ‹Ÿè¿™ä¸ªè¿‡ç¨‹ï¼š

1. ä½¿ç”¨æ ˆæ¥å­˜å‚¨å¾…è®¿é—®çš„èŠ‚ç‚¹
1. ä¸€ç›´å‘å·¦èµ°åˆ°åº•ï¼Œå°†è·¯å¾„ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹å…¥æ ˆ
1. å¼¹å‡ºæ ˆé¡¶èŠ‚ç‚¹ï¼Œè®¿é—®å®ƒ
1. è½¬å‘å³å­æ ‘ï¼Œé‡å¤ä¸Šè¿°è¿‡ç¨‹

**æ­¥éª¤ï¼š**

- åˆå§‹åŒ–ç©ºæ ˆå’Œç»“æœåˆ—è¡¨
- å½“å‰èŠ‚ç‚¹ä»æ ¹å¼€å§‹
- å¾ªç¯ç›´åˆ°å½“å‰èŠ‚ç‚¹ä¸ºç©ºä¸”æ ˆä¸ºç©ºï¼š
  - ä¸€ç›´å‘å·¦ï¼Œå°†èŠ‚ç‚¹å…¥æ ˆ
  - å¼¹å‡ºæ ˆé¡¶ï¼ŒåŠ å…¥ç»“æœ
  - è½¬å‘å³å­æ ‘

### æ–¹æ³•ä¸‰ï¼šMorris éå†ï¼ˆç©ºé—´å¤æ‚åº¦ O(1)ï¼‰âš¡

è¿™æ˜¯ä¸€ç§å·§å¦™çš„ç®—æ³•ï¼Œé€šè¿‡ä¸´æ—¶ä¿®æ”¹æ ‘çš„ç»“æ„æ¥é¿å…ä½¿ç”¨é¢å¤–ç©ºé—´ï¼š

1. å¦‚æœå½“å‰èŠ‚ç‚¹æ²¡æœ‰å·¦å­æ ‘ï¼Œè®¿é—®å½“å‰èŠ‚ç‚¹ï¼Œè½¬å‘å³å­æ ‘
1. å¦‚æœæœ‰å·¦å­æ ‘ï¼Œæ‰¾åˆ°å·¦å­æ ‘çš„æœ€å³èŠ‚ç‚¹ï¼ˆå‰é©±èŠ‚ç‚¹ï¼‰
   - å¦‚æœå‰é©±èŠ‚ç‚¹çš„å³æŒ‡é’ˆä¸ºç©ºï¼Œå°†å…¶æŒ‡å‘å½“å‰èŠ‚ç‚¹ï¼Œç„¶åè½¬å‘å·¦å­æ ‘
   - å¦‚æœå‰é©±èŠ‚ç‚¹çš„å³æŒ‡é’ˆæŒ‡å‘å½“å‰èŠ‚ç‚¹ï¼Œè¯´æ˜å·¦å­æ ‘å·²éå†å®Œï¼Œè®¿é—®å½“å‰èŠ‚ç‚¹ï¼Œæ¢å¤æ ‘ç»“æ„ï¼Œè½¬å‘å³å­æ ‘

## ä»£ç å®ç°

```java
// æ–¹æ³•ä¸€ï¼šé€’å½’æ³•
class Solution {
    public List&lt;Integer&gt; inorderTraversal(TreeNode root) {
        List&lt;Integer&gt; result = new ArrayList&lt;&gt;();
        inorder(root, result);
        return result;
    }


    private void inorder(TreeNode node, List&lt;Integer&gt; result) {
        if (node == null) {
            return;
        }
        inorder(node.left, result);
        result.add(node.val);
        inorder(node.right, result);
    }
}
```

// æ–¹æ³•äºŒï¼šè¿­ä»£æ³•

```java
class Solution {
    public List<Integer> inorderTraversal(TreeNode root) {
        List<Integer> result = new ArrayList<>();
        Stack<TreeNode> stack = new Stack<>();
        TreeNode current = root;

        while (current != null || !stack.isEmpty()) {
            // ä¸€ç›´å‘å·¦èµ°åˆ°åº•
            while (current != null) {
                stack.push(current);
                current = current.left;
            }
            // å¼¹å‡ºæ ˆé¡¶å¹¶è®¿é—®
            current = stack.pop();
            result.add(current.val);
            // è½¬å‘å³å­æ ‘
            current = current.right;
        }
        
        return result;
    }
}
```

// æ–¹æ³•ä¸‰ï¼šMorris éå†
```java
class Solution {
    public List<Integer> inorderTraversal(TreeNode root) {
        List<Integer> result = new ArrayList<>();
        TreeNode current = root;
        while (current != null) {
            if (current.left == null) {
                // æ²¡æœ‰å·¦å­æ ‘ï¼Œè®¿é—®å½“å‰èŠ‚ç‚¹
                result.add(current.val);
                current = current.right;
            } else {
                // æ‰¾åˆ°å·¦å­æ ‘çš„æœ€å³èŠ‚ç‚¹ï¼ˆå‰é©±èŠ‚ç‚¹ï¼‰
                TreeNode predecessor = current.left;
                while (predecessor.right != null && predecessor.right != current) {
                    predecessor = predecessor.right;
                }
                
                if (predecessor.right == null) {
                    // å»ºç«‹çº¿ç´¢
                    predecessor.right = current;
                    current = current.left;
                } else {
                    // æ¢å¤æ ‘ç»“æ„ï¼Œè®¿é—®å½“å‰èŠ‚ç‚¹
                    predecessor.right = null;
                    result.add(current.val);
                    current = current.right;
                }
            }
        }
        
        return result;
    }
}
```

// æ–¹æ³•ä¸€ï¼šé€’å½’æ³•
```go
func inorderTraversal(root *TreeNode) []int {
    var result []int
    inorder(root, &result)
    return result
}

func inorder(node *TreeNode, result *[]int) {
    if node == nil {
        return
    }
    inorder(node.Left, result)
    *result = append(*result, node.Val)
    inorder(node.Right, result)
}

// æ–¹æ³•äºŒï¼šè¿­ä»£æ³•
```go
func inorderTraversal(root \*TreeNode) []int {
    var result []int
    stack := []\*TreeNode{}
    current := root
    
    for current != nil || len(stack) > 0 {
        // ä¸€ç›´å‘å·¦èµ°åˆ°åº•
        for current != nil {
            stack = append(stack, current)
            current = current.Left
        }
        // å¼¹å‡ºæ ˆé¡¶å¹¶è®¿é—®
        current = stack[len(stack)-1]
        stack = stack[:len(stack)-1]
        result = append(result, current.Val)
        // è½¬å‘å³å­æ ‘
        current = current.Right
    }
    
    return result
}
```
// æ–¹æ³•ä¸‰ï¼šMorris éå†
```go
func inorderTraversal(root \*TreeNode) []int {
    var result []int
    current := root
    for current != nil {
        if current.Left == nil {
            // æ²¡æœ‰å·¦å­æ ‘ï¼Œè®¿é—®å½“å‰èŠ‚ç‚¹
            result = append(result, current.Val)
            current = current.Right
        } else {
            // æ‰¾åˆ°å·¦å­æ ‘çš„æœ€å³èŠ‚ç‚¹ï¼ˆå‰é©±èŠ‚ç‚¹ï¼‰
            predecessor := current.Left
            for predecessor.Right != nil && predecessor.Right != current {
                predecessor = predecessor.Right
            }
            
            if predecessor.Right == nil {
                // å»ºç«‹çº¿ç´¢
                predecessor.Right = current
                current = current.Left
            } else {
                // æ¢å¤æ ‘ç»“æ„ï¼Œè®¿é—®å½“å‰èŠ‚ç‚¹
                predecessor.Right = nil
                result = append(result, current.Val)
                current = current.Right
            }
        }
    }
    return result
}
```

## ç¤ºä¾‹æ¼”ç¤º

è®©æˆ‘ä»¬ä»¥ç¤ºä¾‹1 `root = [1,null,2,3]` ä¸ºä¾‹ï¼š

```
    1
     \
      2
     /
    3
```

### é€’å½’æ³•æ‰§è¡Œè¿‡ç¨‹ï¼š

1. `inorder(1)` â†’ è°ƒç”¨ `inorder(null)`ï¼ˆå·¦å­æ ‘ï¼‰â†’ è¿”å›
1. æ·»åŠ  `1` åˆ°ç»“æœ
1. è°ƒç”¨ `inorder(2)`
   - `inorder(2)` â†’ è°ƒç”¨ `inorder(3)`
     - `inorder(3)` â†’ è°ƒç”¨ `inorder(null)` â†’ è¿”å›
     - æ·»åŠ  `3` åˆ°ç»“æœ
     - è°ƒç”¨ `inorder(null)` â†’ è¿”å›
   - æ·»åŠ  `2` åˆ°ç»“æœ
   - è°ƒç”¨ `inorder(null)` â†’ è¿”å›

æœ€ç»ˆç»“æœï¼š`[1, 3, 2]`

### è¿­ä»£æ³•æ‰§è¡Œè¿‡ç¨‹ï¼š

| æ­¥éª¤ | å½“å‰èŠ‚ç‚¹ | æ ˆçŠ¶æ€ | ç»“æœ |
|------|----------|--------|------|
| 1 | 1 | [1] | [] |
| 2 | null | [1] | [] |
| 3 | 1 (å¼¹å‡º) | [] | [1] |
| 4 | 2 | [2] | [1] |
| 5 | 3 | [2, 3] | [1] |
| 6 | null | [2, 3] | [1] |
| 7 | 3 (å¼¹å‡º) | [2] | [1, 3] |
| 8 | null | [2] | [1, 3] |
| 9 | 2 (å¼¹å‡º) | [] | [1, 3, 2] |
| 10 | null | [] | [1, 3, 2] |

## ç­”æ¡ˆæœ‰æ•ˆæ€§è¯æ˜

âœ… **æ­£ç¡®æ€§è¯æ˜ï¼š**

1. **é€’å½’æ³•**ï¼šä¸¥æ ¼æŒ‰ç…§ä¸­åºéå†çš„æ•°å­¦å®šä¹‰å®ç°ï¼Œå…ˆå·¦åæ ¹å†å³ï¼Œç¬¦åˆè¦æ±‚ã€‚

1. **è¿­ä»£æ³•**ï¼šé€šè¿‡æ ˆæ¨¡æ‹Ÿé€’å½’è°ƒç”¨è¿‡ç¨‹ã€‚æ¯æ¬¡éƒ½å°†å·¦è·¯å¾„ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹å…¥æ ˆï¼Œç¡®ä¿å·¦å­æ ‘è¢«å®Œå…¨å¤„ç†åå†å¤„ç†æ ¹èŠ‚ç‚¹ï¼Œç„¶åå¤„ç†å³å­æ ‘ã€‚

1. **Morriséå†**ï¼šé€šè¿‡å»ºç«‹ä¸´æ—¶çº¿ç´¢ï¼Œç¡®ä¿æ¯ä¸ªèŠ‚ç‚¹éƒ½èƒ½è¢«æ­£ç¡®è®¿é—®ä¸€æ¬¡ï¼Œä¸”åœ¨è®¿é—®å®Œæˆåæ¢å¤åŸå§‹æ ‘ç»“æ„ã€‚

âœ… **è¾¹ç•Œæƒ…å†µéªŒè¯ï¼š**

- ç©ºæ ‘ï¼šè¿”å›ç©ºåˆ—è¡¨ âœ“
- å•èŠ‚ç‚¹ï¼šè¿”å›åŒ…å«è¯¥èŠ‚ç‚¹å€¼çš„åˆ—è¡¨ âœ“
- åªæœ‰å·¦å­æ ‘ï¼šæ­£ç¡®æŒ‰ä¸­åºè®¿é—® âœ“
- åªæœ‰å³å­æ ‘ï¼šæ­£ç¡®æŒ‰ä¸­åºè®¿é—® âœ“

## å¤æ‚åº¦åˆ†æ

| æ–¹æ³• | æ—¶é—´å¤æ‚åº¦ | ç©ºé—´å¤æ‚åº¦ | è¯´æ˜ |
|------|------------|------------|------|
| é€’å½’æ³• | O(n) | O(h) | hä¸ºæ ‘çš„é«˜åº¦ï¼Œæœ€åO(n)ï¼Œæœ€å¥½O(log n) |
| è¿­ä»£æ³• | O(n) | O(h) | æ ˆç©ºé—´ï¼ŒåŒé€’å½’æ³• |
| Morriséå† | O(n) | O(1) | åªä½¿ç”¨å¸¸æ•°é¢å¤–ç©ºé—´ |

**æ—¶é—´å¤æ‚åº¦è¯´æ˜ï¼š** æ¯ä¸ªèŠ‚ç‚¹éƒ½è¢«è®¿é—®æ°å¥½ä¸€æ¬¡ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦ä¸º O(n)ã€‚

**ç©ºé—´å¤æ‚åº¦è¯´æ˜ï¼š**

- é€’å½’å’Œè¿­ä»£æ³•çš„ç©ºé—´å¤æ‚åº¦å–å†³äºæ ‘çš„é«˜åº¦
- Morriséå†é€šè¿‡ä¿®æ”¹æ ‘ç»“æ„é¿å…äº†é¢å¤–ç©ºé—´ï¼Œä½†ä¼šæš‚æ—¶æ”¹å˜åŸæ ‘ç»“æ„ï¼ˆæœ€åä¼šæ¢å¤ï¼‰

## é—®é¢˜æ€»ç»“

ğŸ“Œ **å…³é”®è¦ç‚¹ï¼š**

- ä¸­åºéå†çš„æ ¸å¿ƒæ˜¯ **å·¦â†’æ ¹â†’å³** çš„è®¿é—®é¡ºåº
- é€’å½’æ³•æœ€ç®€æ´æ˜“æ‡‚ï¼Œæ˜¯é¦–é€‰æ–¹æ¡ˆ
- è¿­ä»£æ³•æœ‰åŠ©äºç†è§£éå†çš„æœ¬è´¨ï¼Œé¢è¯•å¸¸è€ƒ
- Morriséå†ç©ºé—´æ•ˆç‡æœ€é«˜ï¼Œä½†å®ç°å¤æ‚ï¼Œä¸€èˆ¬äº†è§£å³å¯

ğŸ’¡ **åº”ç”¨åœºæ™¯ï¼š**

- äºŒå‰æœç´¢æ ‘çš„ä¸­åºéå†ç»“æœæ˜¯æœ‰åºçš„
- ç”¨äºéªŒè¯äºŒå‰æœç´¢æ ‘çš„æœ‰æ•ˆæ€§
- æ ‘çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–

âŒ **å¸¸è§é”™è¯¯ï¼š**

- æ··æ·†å‰åºã€ä¸­åºã€ååºçš„è®¿é—®é¡ºåº
- è¿­ä»£æ³•ä¸­å¿˜è®°å¤„ç†å³å­æ ‘
- è¾¹ç•Œæ¡ä»¶å¤„ç†ä¸å½“ï¼ˆç©ºæ ‘ã€å•èŠ‚ç‚¹ï¼‰

âœ… **æœ€ä½³å®è·µï¼š**

- ç†è§£æ¯ç§æ–¹æ³•çš„æ—¶é—´ç©ºé—´æƒè¡¡
- æŒæ¡å¦‚ä½•å°†é€’å½’æ€è·¯è½¬æ¢ä¸ºè¿­ä»£å®ç°
